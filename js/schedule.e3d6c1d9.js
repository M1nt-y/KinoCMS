"use strict";(self["webpackChunkkino_cms"]=self["webpackChunkkino_cms"]||[]).push([[580],{2542:function(e,t,i){i.d(t,{h:function(){return n}});var a=i(1020),s=i(36),l=i(7329);const n=(0,a.Q_)({id:"Main",state:()=>({isActive:!1,currentLanguage:{selected:"en",index:0}}),actions:{toggleMenu(){this.isActive=!this.isActive},async getBooking(e){const t=(0,s.JU)(l.db,"booking","event-"+e),i=await(0,s.QT)(t);return i.exists()?i.data():void 0},async updateBooking(e,t){const i=Object.assign({},t);await(0,s.pl)((0,s.JU)(l.db,"booking","event-"+e),i)}}})},685:function(e,t,i){i.d(t,{s:function(){return o}});i(7658);var a=i(1020),s=i(1294),l=i(7329),n=i(36);const o=(0,a.Q_)({id:"Movies",state:()=>({movieList:[],upcomingList:[],loading:!1,showModal:!1,showUpcomingModal:!1,uploaded:!1}),actions:{async getMovies(){this.movieList=[],this.loading=!0;const e=await(0,n.PL)((0,n.hJ)(l.db,"movies"));e.forEach((e=>{this.movieList.push({id:this.movieList.length,name:e.id,uploaded:!0,language:e.data().language,data:e.data().data,images:[{main:{name:e.data().data[0].main.name,image:null,url:e.data().data[0].main.url},gallery:[],deleted:[]},{main:{name:e.data().data[1].main.name,image:null,url:e.data().data[1].main.url},gallery:[],deleted:[]}]})})),this.movieList.forEach((e=>{for(let t=0;t<e.data.length;t++)for(let i=0;i<e.data[t].gallery.length;i++)e.images[t].gallery.push({id:e.images[t].gallery.length,name:e.data[t].gallery[i].name,uploaded:!0,image:null,url:e.data[t].gallery[i].url})})),this.loading=!1},addMovie(e){this.movieList.push(e)},async deleteMovie(e){if(this.showModal=!1,this.loading=!0,this.movieList[e].uploaded){await(0,n.oe)((0,n.JU)(l.db,"movies",this.movieList[e].name));for(let t=0;t<this.movieList[e].images.length;t++){if(null!==this.movieList[e].images[t].main.name){const i=(0,s.iH)(l.tO,"movies/main/"+this.movieList[e].images[t].main.name);await(0,s.oq)(i).catch((e=>{console.error(e)}))}if(0!==this.movieList[e].images[t].gallery.length)for(let i=0;i<this.movieList[e].images[t].gallery.length;i++){const a=(0,s.iH)(l.tO,"movies/gallery/"+this.movieList[e].images[t].gallery[i].name);await(0,s.oq)(a).catch((e=>{console.error(e)}))}if(0!==this.movieList[e].images[t].deleted.length)for(let i=0;i<this.movieList[e].images[t].deleted.length;i++){const a=(0,s.iH)(l.tO,"movies/gallery/"+this.movieList[e].images[t].deleted[i].name);await(0,s.oq)(a).catch((e=>{console.error(e)}))}}}this.movieList.splice(e,1);for(let t=0;t<this.movieList.length;t++)this.movieList[t].id!==t&&(this.movieList[t].id=t);this.loading=!1},async uploadMovie(e){this.loading=!0,this.uploaded=!1;for(let i=0;i<this.movieList[e].images.length;i++){if(null!==this.movieList[e].images[i].main.image)try{const t=(0,s.iH)(l.tO,"movies/main/"+this.movieList[e].images[i].main.name);await(0,s.KV)(t,this.movieList[e].images[i].main.image).then((async()=>{await(0,s.Jt)(t).then((t=>{this.movieList[e].data[i].main.url=t}))}))}catch(t){console.error("Error uploading image: ",t)}if(0!==this.movieList[e].images[i].deleted.length)for(let t=0;t<this.movieList[e].images[i].deleted.length;t++){const a=(0,s.iH)(l.tO,"movies/gallery/"+this.movieList[e].images[i].deleted[t]);await(0,s.oq)(a).then((()=>{this.movieList[e].images[i].deleted.splice(t,1)})).catch((e=>{console.error(e)}))}if(this.movieList[e].images[i].gallery.length)for(let a=0;a<this.movieList[e].images[i].gallery.length;a++)if(null!==this.movieList[e].images[i].gallery[a].image)try{const t=(0,s.iH)(l.tO,"movies/gallery/"+this.movieList[e].images[i].gallery[a].name);await(0,s.KV)(t,this.movieList[e].images[i].gallery[a].image).then((async()=>{await(0,s.Jt)(t).then((t=>{this.movieList[e].data[i].gallery[a].url=t}))}))}catch(t){console.error("Error uploading image: ",t)}}for(let i=0;i<this.movieList[e].data.length;i++)for(let t=0;t<this.movieList[e].data[i].gallery.length;t++)null!==this.movieList[e].data[i].gallery[t].url&&t===this.movieList[e].data[i].gallery.length-1&&i===this.movieList[e].data.length-1&&this.uploadMovieData(e)},async uploadMovieData(e){const t={language:this.movieList[e].language,data:this.movieList[e].data};await(0,n.pl)((0,n.JU)(l.db,"movies",this.movieList[e].name),t).then((()=>{this.loading=!1,this.uploaded=!0}))},async resetMovie(e){if(this.loading=!0,this.movieList[e].uploaded){for(let a=0;a<this.movieList[e].images.length;a++)this.movieList[e].images[a].main.name=null,this.movieList[e].images[a].main.image=null,this.movieList[e].images[a].main.url=null,this.movieList[e].images[a].gallery=[],this.movieList[e].images[a].deleted=[];const t=(0,n.JU)(l.db,"movies",this.movieList[e].name),i=await(0,n.QT)(t);if(i.exists()){this.movieList[e].data=i.data().data;for(let t=0;t<this.movieList[e].data.length;t++){this.movieList[e].images[t].main.name=this.movieList[e].data[t].main.name,this.movieList[e].images[t].main.url=this.movieList[e].data[t].main.url;for(let i=0;i<this.movieList[e].data[t].gallery.length;i++)this.movieList[e].images[t].gallery.push({id:this.movieList[e].data[t].gallery.length,name:this.movieList[e].data[t].gallery[i].name,uploaded:!0,image:null,url:this.movieList[e].data[t].gallery[i].url})}}}this.loading=!1},async getUpcoming(){this.upcomingList=[],this.loading=!0;const e=await(0,n.PL)((0,n.hJ)(l.db,"upcoming"));e.forEach((e=>{this.upcomingList.push({id:this.upcomingList.length,name:e.id,uploaded:!0,language:e.data().language,data:e.data().data,images:[{main:{name:e.data().data[0].main.name,image:null,url:e.data().data[0].main.url},gallery:[],deleted:[]},{main:{name:e.data().data[1].main.name,image:null,url:e.data().data[1].main.url},gallery:[],deleted:[]}]})})),this.upcomingList.forEach((e=>{for(let t=0;t<e.data.length;t++){for(let i=0;i<e.data[t].gallery.length;i++)e.images[t].gallery.push({id:e.images[t].gallery.length,name:e.data[t].gallery[i].name,uploaded:!0,image:null,url:e.data[t].gallery[i].url});"object"===typeof e.data[t].screeningDate&&(e.data[t].screeningDate=new Date(1e3*e.data[t].screeningDate.seconds))}})),this.loading=!1},addUpcoming(e){this.upcomingList.push(e)},async deleteUpcoming(e){if(this.showUpcomingModal=!1,this.loading=!0,this.upcomingList[e].uploaded){await(0,n.oe)((0,n.JU)(l.db,"upcoming",this.upcomingList[e].name));for(let t=0;t<this.upcomingList[e].images.length;t++){if(null!==this.upcomingList[e].images[t].main.name){const i=(0,s.iH)(l.tO,"upcoming/main/"+this.upcomingList[e].images[t].main.name);await(0,s.oq)(i).catch((e=>{console.error(e)}))}if(0!==this.upcomingList[e].images[t].gallery.length)for(let i=0;i<this.upcomingList[e].images[t].gallery.length;i++){const a=(0,s.iH)(l.tO,"upcoming/gallery/"+this.upcomingList[e].images[t].gallery[i].name);await(0,s.oq)(a).catch((e=>{console.error(e)}))}if(0!==this.upcomingList[e].images[t].deleted.length)for(let i=0;i<this.upcomingList[e].images[t].deleted.length;i++){const a=(0,s.iH)(l.tO,"upcoming/gallery/"+this.upcomingList[e].images[t].deleted[i].name);await(0,s.oq)(a).catch((e=>{console.error(e)}))}}}this.upcomingList.splice(e,1);for(let t=0;t<this.upcomingList.length;t++)this.upcomingList[t].id!==t&&(this.upcomingList[t].id=t);this.loading=!1},async uploadUpcoming(e){this.loading=!0,this.uploaded=!1;for(let i=0;i<this.upcomingList[e].images.length;i++){if(null!==this.upcomingList[e].images[i].main.image)try{const t=(0,s.iH)(l.tO,"upcoming/main/"+this.upcomingList[e].images[i].main.name);await(0,s.KV)(t,this.upcomingList[e].images[i].main.image).then((async()=>{await(0,s.Jt)(t).then((t=>{this.upcomingList[e].data[i].main.url=t}))}))}catch(t){console.error("Error uploading image: ",t)}if(0!==this.upcomingList[e].images[i].deleted.length)for(let t=0;t<this.upcomingList[e].images[i].deleted.length;t++){const a=(0,s.iH)(l.tO,"upcoming/gallery/"+this.upcomingList[e].images[i].deleted[t]);await(0,s.oq)(a).then((()=>{this.upcomingList[e].images[i].deleted.splice(t,1)})).catch((e=>{console.error(e)}))}for(let a=0;a<this.upcomingList[e].images[i].gallery.length;a++)if(null!==this.upcomingList[e].images[i].gallery[a].image)try{const t=(0,s.iH)(l.tO,"upcoming/gallery/"+this.upcomingList[e].images[i].gallery[a].name);await(0,s.KV)(t,this.upcomingList[e].images[i].gallery[a].image).then((async()=>{await(0,s.Jt)(t).then((t=>{this.upcomingList[e].data[i].gallery[a].url=t}))}))}catch(t){console.error("Error uploading image: ",t)}}for(let i=0;i<this.upcomingList[e].data.length;i++)for(let t=0;t<this.upcomingList[e].data[i].gallery.length;t++)null!==this.upcomingList[e].data[i].gallery[t].url&&t===this.upcomingList[e].data[i].gallery.length-1&&i===this.upcomingList[e].data.length-1&&this.uploadUpcomingData(e)},async uploadUpcomingData(e){const t={language:this.upcomingList[e].language,data:this.upcomingList[e].data};await(0,n.pl)((0,n.JU)(l.db,"upcoming",this.upcomingList[e].name),t).then((()=>{this.loading=!1,this.uploaded=!0}))},async resetUpcoming(e){if(this.loading=!0,this.upcomingList[e].uploaded){for(let a=0;a<this.upcomingList[e].images.length;a++)this.upcomingList[e].images[a].main.name=null,this.upcomingList[e].images[a].main.image=null,this.upcomingList[e].images[a].main.url=null,this.upcomingList[e].images[a].gallery=[],this.upcomingList[e].images[a].deleted=[];const t=(0,n.JU)(l.db,"upcoming",this.upcomingList[e].name),i=await(0,n.QT)(t);if(i.exists()){this.upcomingList[e].data=i.data().data;for(let t=0;t<this.upcomingList[e].data.length;t++){"object"===typeof this.upcomingList[e].data[t].date&&(this.upcomingList[e].data[t].date=new Date(1e3*this.upcomingList[e].data[t].date.seconds)),this.upcomingList[e].images[t].main.name=this.upcomingList[e].data[t].main.name,this.upcomingList[e].images[t].main.url=this.upcomingList[e].data[t].main.url;for(let i=0;i<this.upcomingList[e].data[t].gallery.length;i++)this.upcomingList[e].images[t].gallery.push({id:this.upcomingList[e].data[t].gallery.length,name:this.upcomingList[e].data[t].gallery[i].name,uploaded:!0,image:null,url:this.upcomingList[e].data[t].gallery[i].url})}}}this.loading=!1}}})},4323:function(e,t,i){i.d(t,{b:function(){return n}});i(7658);var a=i(1020),s=i(36),l=i(7329);const n=(0,a.Q_)({id:"Schedule",state:()=>({loading:!1,eventDate:null,selectedCinema:null,selectedHall:null,selectedMovie:null,moviePrice:null,scheduledEvents:[]}),actions:{async getSchedule(){this.loading=!0,this.scheduledEvents=[];const e=await(0,s.PL)((0,s.hJ)(l.db,"schedule"));e.forEach((e=>{this.scheduledEvents.push({id:this.scheduledEvents.length,name:e.id,title:e.data().title,start:e.data().start,end:e.data().end,selectedCinema:e.data().selectedCinema,selectedHall:e.data().selectedHall,selectedMovie:e.data().selectedMovie,moviePrice:e.data().moviePrice})}));for(let t=0;t<this.scheduledEvents.length;t++)"object"===typeof this.scheduledEvents[t].end&&(this.scheduledEvents[t].end=new Date(1e3*this.scheduledEvents[t].end.seconds));this.loading=!1},async deleteEvent(e){this.loading=!0,await(0,s.oe)((0,s.JU)(l.db,"schedule",this.scheduledEvents[e].name)),this.loading=!1},async uploadEvent(e){this.loading=!0;const t={title:`${this.scheduledEvents[e].selectedCinema} - ${this.scheduledEvents[e].selectedMovie}`,start:this.scheduledEvents[e].start,end:this.scheduledEvents[e].end,selectedCinema:this.scheduledEvents[e].selectedCinema,selectedHall:this.scheduledEvents[e].selectedHall,selectedMovie:this.scheduledEvents[e].selectedMovie,moviePrice:this.scheduledEvents[e].moviePrice};await(0,s.pl)((0,s.JU)(l.db,"schedule",this.scheduledEvents[e].name),t).then((()=>{this.loading=!1}))}}})},4884:function(e,t,i){i.r(t),i.d(t,{default:function(){return x}});var a=i(3396),s=i(4870),l=i(7139),n=i(9242),o=i(9024),d=i(1887),m=i(2542),g=i(4323),c=i(685);const h=e=>((0,a.dD)("data-v-d6c069e2"),e=e(),(0,a.Cn)(),e),u={class:"page schedule"},r={class:"container"},v={class:"schedule__filters"},p=h((()=>(0,a._)("option",{value:""},"All cinemas",-1))),L=["value"],y=h((()=>(0,a._)("option",{value:""},"All movies",-1))),f=["value"],_=h((()=>(0,a._)("option",{value:""},"All halls",-1))),w=[_],b=h((()=>(0,a._)("option",{disabled:"",value:""},"Please select one",-1))),U=["value"],E={key:0,class:"table"},H=h((()=>(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",{class:"table__item table__column"},"Time"),(0,a._)("th",{class:"table__item table__column"},"Movie"),(0,a._)("th",{class:"table__item table__column"},"Hall"),(0,a._)("th",{class:"table__item table__column"},"Price"),(0,a._)("th",{class:"table__item table__column"},"Book a ticket")])],-1))),D={class:"table__item"},M={class:"table__item"},k={class:"table__item"},S={class:"table__item"},J={key:1},O={name:"SchedulePage"};var P=Object.assign(O,{setup(e){const t=(0,m.h)(),i=(0,g.b)(),h=(0,d.a)(),_=(0,c.s)();i.getSchedule(),h.getCinemas(),_.getMovies();const O=(0,s.iH)(""),P=(0,s.iH)(new Date),C=(0,s.iH)(""),V=(0,s.iH)(""),x=(0,a.Fl)((()=>{let e=null;return""!==O.value&&h.cinemaList.forEach((t=>{t.data[0].title===O.value&&(e=t.id)})),e}));(0,a.YP)((()=>O.value),(()=>{V.value=""}));const q=(0,a.Fl)((()=>""!==O.value?i.scheduledEvents.filter((e=>e.selectedCinema===O.value)):i.scheduledEvents)),K=(0,a.Fl)((()=>""!==V.value?q.value.filter((e=>e.selectedHall===V.value)):q.value)),z=(0,a.Fl)((()=>""!==C.value?K.value.filter((e=>e.selectedMovie===C.value)):K.value)),A=(0,a.Fl)((()=>P.value?z.value.filter((e=>new Date(e.start).setHours(0,0,0,0)===new Date(P.value).setHours(0,0,0,0))):z.value)),F=(0,a.Fl)((()=>{let e=A.value;return e.sort(((e,t)=>e.start-t.start))}));function Q(e){let t=new Date(e).getHours(),i=new Date(e).getMinutes();return t<10&&(t="0"+t),i<10&&(i="0"+i),t+":"+i}function j(e){let i=e;return _.movieList.forEach((a=>{a.data[0].title===e&&(i=a.data[t.currentLanguage.index].title)})),i}function Y(e){let i=e;return h.cinemaList.forEach((a=>{a.halls.forEach((a=>{a.data[0].title===e&&(i=a.data[t.currentLanguage.index].title)}))})),i}function T(e){return"schedule/"+e.replace("event-","")}return(e,i)=>{const d=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",u,[(0,a._)("div",r,[(0,a._)("div",v,[(0,a.wy)((0,a._)("select",{class:"form-control schedule__filter","onUpdate:modelValue":i[0]||(i[0]=e=>O.value=e)},[p,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,s.SU)(h).cinemaList,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.id,value:e.data[0].title},(0,l.zw)(e.data[(0,s.SU)(t).currentLanguage.index].title),9,L)))),128))],512),[[n.vModelSelect,O.value]]),(0,a.Wm)((0,s.SU)(o.Z),{class:"schedule__filter",placeholder:e.$t("placeholders.date"),modelValue:P.value,"onUpdate:modelValue":i[1]||(i[1]=e=>P.value=e),"enable-time-picker":!1,"close-on-scroll":""},null,8,["placeholder","modelValue"]),(0,a.wy)((0,a._)("select",{class:"form-control schedule__filter","onUpdate:modelValue":i[2]||(i[2]=e=>C.value=e)},[y,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,s.SU)(_).movieList,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.id,value:e.data[0].title},(0,l.zw)(e.data[(0,s.SU)(t).currentLanguage.index].title),9,f)))),128))],512),[[n.vModelSelect,C.value]]),null===(0,s.SU)(x)?(0,a.wy)(((0,a.wg)(),(0,a.iD)("select",{key:0,class:"form-control schedule__filter","onUpdate:modelValue":i[3]||(i[3]=e=>V.value=e),disabled:""},w,512)),[[n.vModelSelect,V.value]]):(0,a.wy)(((0,a.wg)(),(0,a.iD)("select",{key:1,class:"form-control schedule__filter","onUpdate:modelValue":i[4]||(i[4]=e=>V.value=e)},[b,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,s.SU)(h).cinemaList[(0,s.SU)(x)].halls,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.id,value:e.data[0].title},(0,l.zw)(e.data[(0,s.SU)(t).currentLanguage.index].title),9,U)))),128))],512)),[[n.vModelSelect,V.value]])]),(0,s.SU)(F).length?((0,a.wg)(),(0,a.iD)("table",E,[H,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,s.SU)(F),(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id},[(0,a._)("td",D,(0,l.zw)(Q(e.start)),1),(0,a._)("td",M,(0,l.zw)(j(e.selectedMovie)),1),(0,a._)("td",k,(0,l.zw)(Y(e.selectedHall)),1),(0,a._)("td",S,(0,l.zw)(e.moviePrice),1),(0,a._)("td",null,[(0,a.Wm)(d,{to:T(e.name)},{default:(0,a.w5)((()=>[(0,a.Uk)(" Go to page ")])),_:2},1032,["to"])])])))),128))])])):((0,a.wg)(),(0,a.iD)("p",J,"No events for selected filters"))])])}}}),C=i(89);const V=(0,C.Z)(P,[["__scopeId","data-v-d6c069e2"]]);var x=V}}]);
//# sourceMappingURL=schedule.e3d6c1d9.js.map