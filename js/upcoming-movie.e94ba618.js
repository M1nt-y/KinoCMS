"use strict";(self["webpackChunkkino_cms"]=self["webpackChunkkino_cms"]||[]).push([[615],{89:function(i,a){a.Z=(i,a)=>{const t=i.__vccOpts||i;for(const[e,s]of a)t[e]=s;return t}},685:function(i,a,t){t.d(a,{s:function(){return o}});t(7658);var e=t(1020),s=t(1294),l=t(7329),n=t(36);const o=(0,e.Q_)({id:"Movies",state:()=>({movieList:[],upcomingList:[],loading:!1,showModal:!1,showUpcomingModal:!1,uploaded:!1}),actions:{async getMovies(){this.movieList=[],this.loading=!0;const i=await(0,n.PL)((0,n.hJ)(l.db,"movies"));i.forEach((i=>{this.movieList.push({id:this.movieList.length,name:i.id,uploaded:!0,language:i.data().language,data:i.data().data,images:[{main:{name:i.data().data[0].main.name,image:null,url:i.data().data[0].main.url},gallery:[],deleted:[]},{main:{name:i.data().data[1].main.name,image:null,url:i.data().data[1].main.url},gallery:[],deleted:[]}]})})),this.movieList.forEach((i=>{for(let a=0;a<i.data.length;a++)for(let t=0;t<i.data[a].gallery.length;t++)i.images[a].gallery.push({id:i.images[a].gallery.length,name:i.data[a].gallery[t].name,uploaded:!0,image:null,url:i.data[a].gallery[t].url})})),this.loading=!1},addMovie(i){this.movieList.push(i)},async deleteMovie(i){if(this.showModal=!1,this.loading=!0,this.movieList[i].uploaded){await(0,n.oe)((0,n.JU)(l.db,"movies",this.movieList[i].name));for(let a=0;a<this.movieList[i].images.length;a++){if(null!==this.movieList[i].images[a].main.name){const t=(0,s.iH)(l.tO,"movies/main/"+this.movieList[i].images[a].main.name);await(0,s.oq)(t).catch((i=>{console.error(i)}))}if(0!==this.movieList[i].images[a].gallery.length)for(let t=0;t<this.movieList[i].images[a].gallery.length;t++){const e=(0,s.iH)(l.tO,"movies/gallery/"+this.movieList[i].images[a].gallery[t].name);await(0,s.oq)(e).catch((i=>{console.error(i)}))}if(0!==this.movieList[i].images[a].deleted.length)for(let t=0;t<this.movieList[i].images[a].deleted.length;t++){const e=(0,s.iH)(l.tO,"movies/gallery/"+this.movieList[i].images[a].deleted[t].name);await(0,s.oq)(e).catch((i=>{console.error(i)}))}}}this.movieList.splice(i,1);for(let a=0;a<this.movieList.length;a++)this.movieList[a].id!==a&&(this.movieList[a].id=a);this.loading=!1},async uploadMovie(i){this.loading=!0,this.uploaded=!1;for(let t=0;t<this.movieList[i].images.length;t++){if(null!==this.movieList[i].images[t].main.image)try{const a=(0,s.iH)(l.tO,"movies/main/"+this.movieList[i].images[t].main.name);await(0,s.KV)(a,this.movieList[i].images[t].main.image).then((async()=>{await(0,s.Jt)(a).then((a=>{this.movieList[i].data[t].main.url=a}))}))}catch(a){console.error("Error uploading image: ",a)}if(0!==this.movieList[i].images[t].deleted.length)for(let a=0;a<this.movieList[i].images[t].deleted.length;a++){const e=(0,s.iH)(l.tO,"movies/gallery/"+this.movieList[i].images[t].deleted[a]);await(0,s.oq)(e).then((()=>{this.movieList[i].images[t].deleted.splice(a,1)})).catch((i=>{console.error(i)}))}if(this.movieList[i].images[t].gallery.length)for(let e=0;e<this.movieList[i].images[t].gallery.length;e++)if(null!==this.movieList[i].images[t].gallery[e].image)try{const a=(0,s.iH)(l.tO,"movies/gallery/"+this.movieList[i].images[t].gallery[e].name);await(0,s.KV)(a,this.movieList[i].images[t].gallery[e].image).then((async()=>{await(0,s.Jt)(a).then((a=>{this.movieList[i].data[t].gallery[e].url=a}))}))}catch(a){console.error("Error uploading image: ",a)}}for(let t=0;t<this.movieList[i].data.length;t++)for(let a=0;a<this.movieList[i].data[t].gallery.length;a++)null!==this.movieList[i].data[t].gallery[a].url&&a===this.movieList[i].data[t].gallery.length-1&&t===this.movieList[i].data.length-1&&this.uploadMovieData(i)},async uploadMovieData(i){const a={language:this.movieList[i].language,data:this.movieList[i].data};await(0,n.pl)((0,n.JU)(l.db,"movies",this.movieList[i].name),a).then((()=>{this.loading=!1,this.uploaded=!0}))},async resetMovie(i){if(this.loading=!0,this.movieList[i].uploaded){for(let e=0;e<this.movieList[i].images.length;e++)this.movieList[i].images[e].main.name=null,this.movieList[i].images[e].main.image=null,this.movieList[i].images[e].main.url=null,this.movieList[i].images[e].gallery=[],this.movieList[i].images[e].deleted=[];const a=(0,n.JU)(l.db,"movies",this.movieList[i].name),t=await(0,n.QT)(a);if(t.exists()){this.movieList[i].data=t.data().data;for(let a=0;a<this.movieList[i].data.length;a++){this.movieList[i].images[a].main.name=this.movieList[i].data[a].main.name,this.movieList[i].images[a].main.url=this.movieList[i].data[a].main.url;for(let t=0;t<this.movieList[i].data[a].gallery.length;t++)this.movieList[i].images[a].gallery.push({id:this.movieList[i].data[a].gallery.length,name:this.movieList[i].data[a].gallery[t].name,uploaded:!0,image:null,url:this.movieList[i].data[a].gallery[t].url})}}}this.loading=!1},async getUpcoming(){this.upcomingList=[],this.loading=!0;const i=await(0,n.PL)((0,n.hJ)(l.db,"upcoming"));i.forEach((i=>{this.upcomingList.push({id:this.upcomingList.length,name:i.id,uploaded:!0,language:i.data().language,data:i.data().data,images:[{main:{name:i.data().data[0].main.name,image:null,url:i.data().data[0].main.url},gallery:[],deleted:[]},{main:{name:i.data().data[1].main.name,image:null,url:i.data().data[1].main.url},gallery:[],deleted:[]}]})})),this.upcomingList.forEach((i=>{for(let a=0;a<i.data.length;a++){for(let t=0;t<i.data[a].gallery.length;t++)i.images[a].gallery.push({id:i.images[a].gallery.length,name:i.data[a].gallery[t].name,uploaded:!0,image:null,url:i.data[a].gallery[t].url});"object"===typeof i.data[a].screeningDate&&(i.data[a].screeningDate=new Date(1e3*i.data[a].screeningDate.seconds))}})),this.loading=!1},addUpcoming(i){this.upcomingList.push(i)},async deleteUpcoming(i){if(this.showUpcomingModal=!1,this.loading=!0,this.upcomingList[i].uploaded){await(0,n.oe)((0,n.JU)(l.db,"upcoming",this.upcomingList[i].name));for(let a=0;a<this.upcomingList[i].images.length;a++){if(null!==this.upcomingList[i].images[a].main.name){const t=(0,s.iH)(l.tO,"upcoming/main/"+this.upcomingList[i].images[a].main.name);await(0,s.oq)(t).catch((i=>{console.error(i)}))}if(0!==this.upcomingList[i].images[a].gallery.length)for(let t=0;t<this.upcomingList[i].images[a].gallery.length;t++){const e=(0,s.iH)(l.tO,"upcoming/gallery/"+this.upcomingList[i].images[a].gallery[t].name);await(0,s.oq)(e).catch((i=>{console.error(i)}))}if(0!==this.upcomingList[i].images[a].deleted.length)for(let t=0;t<this.upcomingList[i].images[a].deleted.length;t++){const e=(0,s.iH)(l.tO,"upcoming/gallery/"+this.upcomingList[i].images[a].deleted[t].name);await(0,s.oq)(e).catch((i=>{console.error(i)}))}}}this.upcomingList.splice(i,1);for(let a=0;a<this.upcomingList.length;a++)this.upcomingList[a].id!==a&&(this.upcomingList[a].id=a);this.loading=!1},async uploadUpcoming(i){this.loading=!0,this.uploaded=!1;for(let t=0;t<this.upcomingList[i].images.length;t++){if(null!==this.upcomingList[i].images[t].main.image)try{const a=(0,s.iH)(l.tO,"upcoming/main/"+this.upcomingList[i].images[t].main.name);await(0,s.KV)(a,this.upcomingList[i].images[t].main.image).then((async()=>{await(0,s.Jt)(a).then((a=>{this.upcomingList[i].data[t].main.url=a}))}))}catch(a){console.error("Error uploading image: ",a)}if(0!==this.upcomingList[i].images[t].deleted.length)for(let a=0;a<this.upcomingList[i].images[t].deleted.length;a++){const e=(0,s.iH)(l.tO,"upcoming/gallery/"+this.upcomingList[i].images[t].deleted[a]);await(0,s.oq)(e).then((()=>{this.upcomingList[i].images[t].deleted.splice(a,1)})).catch((i=>{console.error(i)}))}for(let e=0;e<this.upcomingList[i].images[t].gallery.length;e++)if(null!==this.upcomingList[i].images[t].gallery[e].image)try{const a=(0,s.iH)(l.tO,"upcoming/gallery/"+this.upcomingList[i].images[t].gallery[e].name);await(0,s.KV)(a,this.upcomingList[i].images[t].gallery[e].image).then((async()=>{await(0,s.Jt)(a).then((a=>{this.upcomingList[i].data[t].gallery[e].url=a}))}))}catch(a){console.error("Error uploading image: ",a)}}for(let t=0;t<this.upcomingList[i].data.length;t++)for(let a=0;a<this.upcomingList[i].data[t].gallery.length;a++)null!==this.upcomingList[i].data[t].gallery[a].url&&a===this.upcomingList[i].data[t].gallery.length-1&&t===this.upcomingList[i].data.length-1&&this.uploadUpcomingData(i)},async uploadUpcomingData(i){const a={language:this.upcomingList[i].language,data:this.upcomingList[i].data};await(0,n.pl)((0,n.JU)(l.db,"upcoming",this.upcomingList[i].name),a).then((()=>{this.loading=!1,this.uploaded=!0}))},async resetUpcoming(i){if(this.loading=!0,this.upcomingList[i].uploaded){for(let e=0;e<this.upcomingList[i].images.length;e++)this.upcomingList[i].images[e].main.name=null,this.upcomingList[i].images[e].main.image=null,this.upcomingList[i].images[e].main.url=null,this.upcomingList[i].images[e].gallery=[],this.upcomingList[i].images[e].deleted=[];const a=(0,n.JU)(l.db,"upcoming",this.upcomingList[i].name),t=await(0,n.QT)(a);if(t.exists()){this.upcomingList[i].data=t.data().data;for(let a=0;a<this.upcomingList[i].data.length;a++){"object"===typeof this.upcomingList[i].data[a].date&&(this.upcomingList[i].data[a].date=new Date(1e3*this.upcomingList[i].data[a].date.seconds)),this.upcomingList[i].images[a].main.name=this.upcomingList[i].data[a].main.name,this.upcomingList[i].images[a].main.url=this.upcomingList[i].data[a].main.url;for(let t=0;t<this.upcomingList[i].data[a].gallery.length;t++)this.upcomingList[i].images[a].gallery.push({id:this.upcomingList[i].data[a].gallery.length,name:this.upcomingList[i].data[a].gallery[t].name,uploaded:!0,image:null,url:this.upcomingList[i].data[a].gallery[t].url})}}}this.loading=!1}}})},144:function(i,a,t){t.d(a,{Z:function(){return p}});var e=t(3396),s=t(7139),l=t(4870),n=t(8040),o=t(9391);const g={class:"gallery"},m={class:"text-center"},r=["src"],u={name:"GallerySwiper"};var c=Object.assign(u,{props:["gallery"],setup(i){const a=(0,l.iH)([o.tl,o.pt,o.W_]);return(t,o)=>((0,e.wg)(),(0,e.iD)("div",g,[(0,e._)("h2",m,(0,s.zw)(t.$t("gallery")),1),(0,e.Wm)((0,l.SU)(n.tq),{"grab-cursor":"","slides-per-view":1,modules:a.value,pagination:{clickable:!0},autoplay:{delay:4e3,disableOnInteraction:!1},navigation:!0},{default:(0,e.w5)((()=>[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(i.gallery,((i,a)=>((0,e.wg)(),(0,e.j4)((0,l.SU)(n.o5),{key:a},{default:(0,e.w5)((()=>[(0,e._)("img",{src:i.url,alt:""},null,8,r)])),_:2},1024)))),128))])),_:1},8,["modules"])]))}}),d=t(89);const h=(0,d.Z)(c,[["__scopeId","data-v-3c84ac43"]]);var p=h},3230:function(i,a,t){t.r(a),t.d(a,{default:function(){return x}});var e=t(3396),s=t(4870),l=t(7139),n=t(685),o=t(2542),g=t(144);const m=i=>((0,e.dD)("data-v-aaa64eea"),i=i(),(0,e.Cn)(),i),r={class:"page"},u={key:0,class:"page__trailer"},c=["src"],d={key:1,class:"container"},h={class:"movie"},p=["src"],L={class:"movie__content"},v=m((()=>(0,e._)("div",{class:"page__ad-horizontal"},null,-1))),y={key:2,class:"page__notfound"},f={class:"container"},w=m((()=>(0,e._)("h2",null,"Movie not found",-1))),_={name:"UpcomingMoviePage"};var U=Object.assign(_,{props:["title"],setup(i){const a=i,t=(0,o.h)(),m=(0,n.s)();m.getUpcoming();const _=(0,e.Fl)((()=>{let i=null;return m.upcomingList.forEach(((t,e)=>{t.data[0].title.replace(/[^a-zA-Z0-9 ]/g,"").toLowerCase().replace(/\s/g,"-")===a.title&&(i=e)})),i})),U=(0,e.Fl)((()=>{let i=null;return null!==_.value&&m.upcomingList[_.value].data[t.currentLanguage.index].trailer&&(i=m.upcomingList[_.value].data[t.currentLanguage.index].trailer.includes("youtu.be")?m.upcomingList[_.value].data[t.currentLanguage.index].trailer.replace("youtu.be","www.youtube.com/embed"):m.upcomingList[_.value].data[t.currentLanguage.index].trailer.includes("youtube.com/watch?v=")?m.upcomingList[_.value].data[t.currentLanguage.index].trailer.replace("watch?v=","embed/"):m.upcomingList[_.value].data[t.currentLanguage.index].trailer),i})),b=(0,e.Fl)((()=>{let i=null;return null!==_.value&&m.upcomingList[_.value].data[t.currentLanguage.index].main.url&&(i=m.upcomingList[_.value].data[t.currentLanguage.index].main.url),i})),k=(0,e.Fl)((()=>{let i=null;return null!==_.value&&m.upcomingList[_.value].data[t.currentLanguage.index].title&&(i=m.upcomingList[_.value].data[t.currentLanguage.index].title),i})),x=(0,e.Fl)((()=>{let i=null;return null!==_.value&&m.upcomingList[_.value].data[t.currentLanguage.index].description&&(i=m.upcomingList[_.value].data[t.currentLanguage.index].description),i})),D=(0,e.Fl)((()=>{let i=[];return null!==_.value&&(i=m.upcomingList[_.value].data[t.currentLanguage.index].gallery),i}));return(i,a)=>{const t=(0,e.up)("router-link");return(0,e.wg)(),(0,e.iD)("div",r,[null!==(0,s.SU)(U)?((0,e.wg)(),(0,e.iD)("div",u,[(0,e._)("iframe",{class:"page__trailer",src:(0,s.SU)(U),allowfullscreen:"",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"},null,8,c)])):(0,e.kq)("",!0),null!==(0,s.SU)(_)?((0,e.wg)(),(0,e.iD)("div",d,[(0,e._)("div",h,[(0,e._)("img",{class:"movie__img",src:(0,s.SU)(b),alt:""},null,8,p),(0,e._)("div",L,[(0,e._)("h2",null,(0,l.zw)((0,s.SU)(k)),1),(0,e._)("p",null,(0,l.zw)((0,s.SU)(x)),1),(0,s.SU)(D).length?((0,e.wg)(),(0,e.j4)((0,s.SU)(g.Z),{key:0,gallery:(0,s.SU)(D)},null,8,["gallery"])):(0,e.kq)("",!0)])]),v])):((0,e.wg)(),(0,e.iD)("div",y,[(0,e._)("div",f,[w,(0,e.Wm)(t,{to:"/upcoming"},{default:(0,e.w5)((()=>[(0,e.Uk)("Go back")])),_:1})])]))])}}}),b=t(89);const k=(0,b.Z)(U,[["__scopeId","data-v-aaa64eea"]]);var x=k}}]);
//# sourceMappingURL=upcoming-movie.e94ba618.js.map