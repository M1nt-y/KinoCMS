{"version":3,"file":"js/admin.4cf54518.js","mappings":"2GAIAA,EAAQ,EAAU,CAACC,EAAKC,KACpB,MAAMC,EAASF,EAAIG,WAAaH,EAChC,IAAK,MAAOI,EAAKC,KAAQJ,EACrBC,EAAOE,GAAOC,EAElB,OAAOH,CAAM,C,wGCHV,MAAMI,GAAgBC,EAAAA,EAAAA,IAAY,CACrCC,GAAI,QACJC,MAAO,KAAM,CACTC,SAAS,EACTC,WAAW,EACXC,UAAW,GACXC,UAAU,IAEdC,QAAS,CACLC,iBACIC,KAAKN,SAAU,EACfM,KAAKJ,UAAY,GACjB,MAAMK,QAAkBC,EAAAA,EAAAA,KAAQC,EAAAA,EAAAA,IAAWC,EAAAA,GAAI,UAC/CH,EAAUI,SAASC,IACfN,KAAKJ,UAAUW,KAAK,CAChBf,GAAIQ,KAAKJ,UAAUY,OACnBC,KAAMH,EAAId,GACVkB,MAAOJ,EAAIK,OAAOD,MAClBE,SAAUN,EAAIK,OAAOC,SACrBC,SAAUP,EAAIK,OAAOE,SACrBC,iBAAkBR,EAAIK,OAAOG,iBAC7BC,SAAUT,EAAIK,OAAOI,SACrBC,MAAOV,EAAIK,OAAOK,MAClBC,WAAYX,EAAIK,OAAOM,WACvBC,SAAUZ,EAAIK,OAAOO,SACrBC,KAAMb,EAAIK,OAAOQ,KACjBC,QAASd,EAAIK,OAAOS,QACpBC,OAAQf,EAAIK,OAAOU,OACnBC,SAAUhB,EAAIK,OAAOW,SACrBC,YAAajB,EAAIK,OAAOD,MACxBc,eAAgB,GAChBC,cAAe,IACjB,IAEN,IAAK,IAAIC,EAAI,EAAGA,EAAI1B,KAAKJ,UAAUY,OAAQkB,IACG,kBAA/B1B,KAAKJ,UAAU8B,GAAGR,WACzBlB,KAAKJ,UAAU8B,GAAGR,SAAW,IAAIS,KAAwC,IAAnC3B,KAAKJ,UAAU8B,GAAGR,SAASU,UAGzE5B,KAAKN,SAAU,CACnB,EACAK,iBAAiBP,GACbQ,KAAKL,WAAY,EACjBK,KAAKN,SAAU,EACf,MAAMmC,GAAOC,EAAAA,EAAAA,IAAQC,EAAAA,KACrBC,EAAAA,EAAAA,IAA2BH,EAAM7B,KAAKJ,UAAUJ,GAAIkB,MAAOV,KAAKJ,UAAUJ,GAAIoB,UACzEqB,MAAMC,IACH,MAAMC,EAAOD,EAAeC,MAC5BC,EAAAA,EAAAA,IAAWD,GAAMF,MAAKlC,gBACZsC,EAAAA,EAAAA,KAAU/B,EAAAA,EAAAA,IAAIF,EAAAA,GAAI,QAASJ,KAAKJ,UAAUJ,GAAIiB,OACpDT,KAAKJ,UAAU0C,OAAO9C,EAAI,GAC1B,IAAK,IAAIkC,EAAI,EAAGA,EAAI1B,KAAKJ,UAAUY,OAAQkB,IACnC1B,KAAKJ,UAAU8B,GAAGlC,KAAOkC,IACzB1B,KAAKJ,UAAU8B,GAAGlC,GAAKkC,EAE/B,IACDa,OAAOC,IACNC,QAAQC,IAAIF,EAAE,GAChB,IAELD,OAAOI,IACJF,QAAQC,IAAIC,EAAM,IAE1B3C,KAAKN,SAAU,CACnB,EACAK,eAAeP,GACXQ,KAAKN,SAAU,EACfM,KAAKH,UAAW,EAChB,MAAMgC,GAAOC,EAAAA,EAAAA,IAAQC,EAAAA,KACrBC,EAAAA,EAAAA,IAA2BH,EAAM7B,KAAKJ,UAAUJ,GAAIkB,MAAOV,KAAKJ,UAAUJ,GAAIoB,UACzEqB,MAAKlC,UACF,MAAMoC,EAAOD,EAAeC,KACxBA,EAAKzB,QAAUV,KAAKJ,UAAUJ,GAAI+B,cAClCvB,KAAKJ,UAAUJ,GAAIkB,MAAQV,KAAKJ,UAAUJ,GAAI+B,aAC9CqB,EAAAA,EAAAA,GAAYT,EAAMnC,KAAKJ,UAAUJ,GAAI+B,aAAagB,OAAOI,IACrDF,QAAQC,IAAIC,EAAM,KAGgB,KAAtC3C,KAAKJ,UAAUJ,GAAIgC,gBAAyBxB,KAAKJ,UAAUJ,GAAIgC,iBAAmBxB,KAAKJ,UAAUJ,GAAIiC,eAAiBzB,KAAKJ,UAAUJ,GAAIoB,WAAaZ,KAAKJ,UAAUJ,GAAIgC,iBACzKxB,KAAKJ,UAAUJ,GAAIoB,SAAWZ,KAAKJ,UAAUJ,GAAIgC,gBACjDqB,EAAAA,EAAAA,IAAeV,EAAMnC,KAAKJ,UAAUJ,GAAIoB,UAAU2B,OAAOI,IACrDF,QAAQC,IAAIC,EAAM,KAG1B,MAAMG,EAAW,CACbpC,MAAOV,KAAKJ,UAAUJ,GAAIkB,MAC1BE,SAAUZ,KAAKJ,UAAUJ,GAAIoB,SAC7BC,SAAUb,KAAKJ,UAAUJ,GAAIqB,SAC7BC,iBAAkBd,KAAKJ,UAAUJ,GAAIsB,iBACrCC,SAAUf,KAAKJ,UAAUJ,GAAIuB,SAC7BC,MAAOhB,KAAKJ,UAAUJ,GAAIwB,MAC1BC,WAAYjB,KAAKJ,UAAUJ,GAAIyB,WAC/BC,SAAUlB,KAAKJ,UAAUJ,GAAI0B,SAC7BC,KAAMnB,KAAKJ,UAAUJ,GAAI2B,KACzBC,QAASpB,KAAKJ,UAAUJ,GAAI4B,QAC5BC,OAAQrB,KAAKJ,UAAUJ,GAAI6B,OAC3BC,SAAUtB,KAAKJ,UAAUJ,GAAI8B,gBAE3ByB,EAAAA,EAAAA,KAAOzC,EAAAA,EAAAA,IAAIF,EAAAA,GAAI,QAASJ,KAAKJ,UAAUJ,GAAIiB,MAAOqC,GAAUb,MAAK,KACnEjC,KAAKH,UAAW,CAAI,GACtB,IACH0C,OAAOI,IACNF,QAAQC,IAAIC,EAAM,IAE1B3C,KAAKN,SAAU,CACnB,I,oIC9GDsD,MAAM,W,UACTC,EAAAA,EAAAA,GAAa,uB,GAAbC,G,0CADFC,EAAAA,EAAAA,IAEM,MAFNC,EAEM,E,CAIR,OACE3C,KAAM,c,QCDR,MAAM4C,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O,oICNO,MAAMC,GAAqBhE,EAAAA,EAAAA,IAAY,CAC1CC,GAAI,aACJC,MAAO,KAAM,CACVC,SAAS,IAEZI,QAAS,CAET,I,oTCsBJ,EAAe,CACbW,KAAM,c,gCATR,MAAM+C,EAAkBD,IAClBE,GAAanE,EAAAA,EAAAA,K,OAEnBmE,EAAWC,W,4PCrBX,MAAML,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://kino-cms/./node_modules/vue-loader/dist/exportHelper.js","webpack://kino-cms/./src/stores/users.js","webpack://kino-cms/./src/components/admin/TheLoading.vue","webpack://kino-cms/./src/components/admin/TheLoading.vue?187b","webpack://kino-cms/./src/stores/statistics.js","webpack://kino-cms/./src/pages/admin/AdminPanel.vue","webpack://kino-cms/./src/pages/admin/AdminPanel.vue?1580"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","import { defineStore } from 'pinia';\r\nimport { collection, deleteDoc, doc, getDocs, setDoc } from \"firebase/firestore\";\r\nimport { db, secondaryApp } from \"@/firebase/firebase\";\r\nimport {getAuth, updatePassword, updateEmail, deleteUser, signInWithEmailAndPassword} from \"firebase/auth\";\r\n\r\n\r\nexport const useUsersStore = defineStore({\r\n    id: \"Users\",\r\n    state: () => ({\r\n        loading: false,\r\n        showModal: false,\r\n        usersList: [],\r\n        uploaded: false,\r\n    }),\r\n    actions: {\r\n        async getUsers() {\r\n            this.loading = true;\r\n            this.usersList = [];\r\n            const usersData = await getDocs(collection(db, 'users'));\r\n            usersData.forEach((doc) => {\r\n                this.usersList.push({\r\n                    id: this.usersList.length,\r\n                    name: doc.id,\r\n                    email: doc.data().email,\r\n                    password: doc.data().password,\r\n                    username: doc.data().username,\r\n                    registrationDate: doc.data().registrationDate,\r\n                    fullName: doc.data().fullName,\r\n                    phone: doc.data().phone,\r\n                    creditCard: doc.data().creditCard,\r\n                    birthday: doc.data().birthday,\r\n                    city: doc.data().city,\r\n                    address: doc.data().address,\r\n                    gender: doc.data().gender,\r\n                    language: doc.data().language,\r\n                    emailChange: doc.data().email,\r\n                    passwordChange: '',\r\n                    passwordCheck: ''\r\n                })\r\n            });\r\n            for (let i = 0; i < this.usersList.length; i++) {\r\n                if (typeof this.usersList[i].birthday === 'object') {\r\n                    this.usersList[i].birthday = new Date(this.usersList[i].birthday.seconds*1000);\r\n                }\r\n            }\r\n            this.loading = false;\r\n        },\r\n        async deleteUser(id) {\r\n            this.showModal = false;\r\n            this.loading = true;\r\n            const auth = getAuth(secondaryApp);\r\n            signInWithEmailAndPassword(auth, this.usersList[id].email, this.usersList[id].password)\r\n                .then((userCredential) => {\r\n                    const user = userCredential.user;\r\n                    deleteUser(user).then(async () => {\r\n                        await deleteDoc(doc(db, \"users\", this.usersList[id].name));\r\n                        this.usersList.splice(id, 1);\r\n                        for (let i = 0; i < this.usersList.length; i++) {\r\n                            if (this.usersList[i].id !== i) {\r\n                                this.usersList[i].id = i;\r\n                            }\r\n                        }\r\n                    }).catch((e) => {\r\n                        console.log(e);\r\n                    });\r\n                })\r\n                .catch((error) => {\r\n                    console.log(error);\r\n                });\r\n            this.loading = false;\r\n        },\r\n        async saveUser(id) {\r\n            this.loading = true;\r\n            this.uploaded = false;\r\n            const auth = getAuth(secondaryApp);\r\n            signInWithEmailAndPassword(auth, this.usersList[id].email, this.usersList[id].password)\r\n                .then(async (userCredential) => {\r\n                    const user = userCredential.user;\r\n                    if (user.email !== this.usersList[id].emailChange) {\r\n                        this.usersList[id].email = this.usersList[id].emailChange;\r\n                        updateEmail(user, this.usersList[id].emailChange).catch((error) => {\r\n                            console.log(error);\r\n                        });\r\n                    }\r\n                    if (this.usersList[id].passwordChange !== '' && this.usersList[id].passwordChange === this.usersList[id].passwordCheck && this.usersList[id].password !== this.usersList[id].passwordChange) {\r\n                        this.usersList[id].password = this.usersList[id].passwordChange;\r\n                        updatePassword(user, this.usersList[id].password).catch((error) => {\r\n                            console.log(error);\r\n                        });\r\n                    }\r\n                    const userData = {\r\n                        email: this.usersList[id].email,\r\n                        password: this.usersList[id].password,\r\n                        username: this.usersList[id].username,\r\n                        registrationDate: this.usersList[id].registrationDate,\r\n                        fullName: this.usersList[id].fullName,\r\n                        phone: this.usersList[id].phone,\r\n                        creditCard: this.usersList[id].creditCard,\r\n                        birthday: this.usersList[id].birthday,\r\n                        city: this.usersList[id].city,\r\n                        address: this.usersList[id].address,\r\n                        gender: this.usersList[id].gender,\r\n                        language: this.usersList[id].language\r\n                    }\r\n                    await setDoc(doc(db, \"users\", this.usersList[id].name), userData).then(() => {\r\n                        this.uploaded = true;\r\n                    });\r\n                }).catch((error) => {\r\n                    console.log(error);\r\n                });\r\n            this.loading = false;\r\n        }\r\n    }\r\n})","<template>\r\n  <div class=\"loading\">\r\n    <span></span>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"TheLoading\"\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.loading {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  z-index: 2023;\r\n  height: 100vh;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  animation: spin;\r\n}\r\n@keyframes spin {\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n.loading span {\r\n  display: block;\r\n  width: 60px;\r\n  height: 60px;\r\n  margin: 0 auto;\r\n  border: 3px solid transparent;\r\n  border-top-color: #FFFFFF;\r\n  border-bottom-color: #FFFFFF;\r\n  border-radius: 50%;\r\n  animation: spin ease 1000ms infinite;\r\n}\r\n</style>","import { render } from \"./TheLoading.vue?vue&type=template&id=60e77b62&scoped=true\"\nimport script from \"./TheLoading.vue?vue&type=script&lang=js\"\nexport * from \"./TheLoading.vue?vue&type=script&lang=js\"\n\nimport \"./TheLoading.vue?vue&type=style&index=0&id=60e77b62&scoped=true&lang=css\"\n\nimport exportComponent from \"S:\\\\Projects\\\\kino-cms\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-60e77b62\"]])\n\nexport default __exports__","import { defineStore } from 'pinia';\r\n\r\n\r\nexport const useStatisticsStore = defineStore({\r\n    id: \"Statistics\",\r\n    state: () => ({\r\n       loading: false,\r\n    }),\r\n    actions: {\r\n\r\n    }\r\n})","<template>\r\n  <div class=\"admin\">\r\n    <TheLoading v-show=\"statisticsStore.loading\" />\r\n    <div class=\"col-lg-3 col-6\">\r\n\r\n      <div class=\"small-box bg-warning\">\r\n        <div class=\"inner\">\r\n          <h3>{{ usersStore.usersList.length }}</h3>\r\n          <p>User Registrations</p>\r\n        </div>\r\n        <div class=\"icon\">\r\n          <i class=\"fas fa-user-plus\"></i>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport TheLoading from \"@/components/admin/TheLoading\";\r\nimport { useStatisticsStore } from \"@/stores/statistics\";\r\nimport {useUsersStore} from \"@/stores/users\";\r\n\r\nconst statisticsStore = useStatisticsStore();\r\nconst usersStore = useUsersStore();\r\n\r\nusersStore.getUsers();\r\n\r\n</script>\r\n\r\n<script>\r\nexport default {\r\n  name: \"AdminPanel\",\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.admin {\r\n  padding: 40px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  /*align-items: center;*/\r\n  gap: 20px;\r\n}\r\n</style>","import script from \"./AdminPanel.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AdminPanel.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./AdminPanel.vue?vue&type=style&index=0&id=797f9a22&scoped=true&lang=css\"\n\nimport exportComponent from \"S:\\\\Projects\\\\kino-cms\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-797f9a22\"]])\n\nexport default __exports__"],"names":["exports","sfc","props","target","__vccOpts","key","val","useUsersStore","defineStore","id","state","loading","showModal","usersList","uploaded","actions","async","this","usersData","getDocs","collection","db","forEach","doc","push","length","name","email","data","password","username","registrationDate","fullName","phone","creditCard","birthday","city","address","gender","language","emailChange","passwordChange","passwordCheck","i","Date","seconds","auth","getAuth","secondaryApp","signInWithEmailAndPassword","then","userCredential","user","deleteUser","deleteDoc","splice","catch","e","console","log","error","updateEmail","updatePassword","userData","setDoc","class","_createElementVNode","_hoisted_2","_createElementBlock","_hoisted_1","__exports__","render","useStatisticsStore","statisticsStore","usersStore","getUsers"],"sourceRoot":""}