"use strict";(self["webpackChunkkino_cms"]=self["webpackChunkkino_cms"]||[]).push([[378],{89:function(e,s){s.Z=(e,s)=>{const t=e.__vccOpts||e;for(const[a,i]of s)t[a]=i;return t}},988:function(e,s,t){t.d(s,{U:function(){return d}});t(7658);var a=t(1020),i=t(36),l=t(7329),r=t(9125);const d=(0,a.Q_)({id:"Users",state:()=>({loading:!1,showModal:!1,usersList:[],uploaded:!1}),actions:{async getUsers(){this.loading=!0,this.usersList=[];const e=await(0,i.PL)((0,i.hJ)(l.db,"users"));e.forEach((e=>{this.usersList.push({id:this.usersList.length,name:e.id,email:e.data().email,password:e.data().password,username:e.data().username,registrationDate:e.data().registrationDate,fullName:e.data().fullName,phone:e.data().phone,creditCard:e.data().creditCard,birthday:e.data().birthday,city:e.data().city,address:e.data().address,gender:e.data().gender,language:e.data().language,emailChange:e.data().email,passwordChange:"",passwordCheck:""})}));for(let s=0;s<this.usersList.length;s++)"object"===typeof this.usersList[s].birthday&&(this.usersList[s].birthday=new Date(1e3*this.usersList[s].birthday.seconds));this.loading=!1},async deleteUser(e){this.showModal=!1,this.loading=!0;const s=(0,r.v0)(l.nG);(0,r.e5)(s,this.usersList[e].email,this.usersList[e].password).then((s=>{const t=s.user;(0,r.h8)(t).then((async()=>{await(0,i.oe)((0,i.JU)(l.db,"users",this.usersList[e].name)),this.usersList.splice(e,1);for(let e=0;e<this.usersList.length;e++)this.usersList[e].id!==e&&(this.usersList[e].id=e)})).catch((e=>{console.log(e)}))})).catch((e=>{console.log(e)})),this.loading=!1},async saveUser(e){this.loading=!0,this.uploaded=!1;const s=(0,r.v0)(l.nG);(0,r.e5)(s,this.usersList[e].email,this.usersList[e].password).then((async s=>{const t=s.user;t.email!==this.usersList[e].emailChange&&(this.usersList[e].email=this.usersList[e].emailChange,(0,r.s)(t,this.usersList[e].emailChange).catch((e=>{console.log(e)}))),""!==this.usersList[e].passwordChange&&this.usersList[e].passwordChange===this.usersList[e].passwordCheck&&this.usersList[e].password!==this.usersList[e].passwordChange&&(this.usersList[e].password=this.usersList[e].passwordChange,(0,r.gQ)(t,this.usersList[e].password).catch((e=>{console.log(e)})));const a={email:this.usersList[e].email,password:this.usersList[e].password,username:this.usersList[e].username,registrationDate:this.usersList[e].registrationDate,fullName:this.usersList[e].fullName,phone:this.usersList[e].phone,creditCard:this.usersList[e].creditCard,birthday:this.usersList[e].birthday,city:this.usersList[e].city,address:this.usersList[e].address,gender:this.usersList[e].gender,language:this.usersList[e].language};await(0,i.pl)((0,i.JU)(l.db,"users",this.usersList[e].name),a).then((()=>{this.uploaded=!0}))})).catch((e=>{console.log(e)})),this.loading=!1}}})},5549:function(e,s,t){t.d(s,{Z:function(){return me}});var a=t(3396),i=t(4870),l=t(9242),r=t(9024),d=t(988),n=t(2483);const o=e=>((0,a.dD)("data-v-53f4ec68"),e=e(),(0,a.Cn)(),e),u={key:0,class:"user"},c={class:"user__wrapper"},p={class:"user__content"},h={class:"user__content-item"},_=o((()=>(0,a._)("p",null,"Full name",-1))),m=["placeholder"],g={class:"user__content-item"},L=o((()=>(0,a._)("p",null,"Username",-1))),v=["placeholder"],U={class:"user__content-item"},y=o((()=>(0,a._)("p",null,"Email",-1))),w=["placeholder"],f={class:"user__content-item"},S=o((()=>(0,a._)("p",null,"Phone number",-1))),b=["placeholder"],C={class:"user__content-item"},x=o((()=>(0,a._)("p",null,"Birthday",-1))),V={class:"user__content-item"},k=o((()=>(0,a._)("p",null,"Credit card",-1))),M=["placeholder"],D={class:"user__content"},T={class:"user__content-item"},Z=o((()=>(0,a._)("p",null,"Preferred language",-1))),$={class:"user__languages"},N={class:"user__languages-radio"},P=o((()=>(0,a._)("label",{for:"en"},"en",-1))),R={class:"user__languages-radio"},j=o((()=>(0,a._)("label",{for:"ua"},"ua",-1))),O={class:"user__content-item"},E=o((()=>(0,a._)("p",null,"Gender",-1))),G={class:"user__genders"},I={class:"user__genders-radio"},J=o((()=>(0,a._)("label",{for:"male"},"male",-1))),W={class:"user__genders-radio"},A=o((()=>(0,a._)("label",{for:"female"},"female",-1))),K={class:"user__content-item"},Q=o((()=>(0,a._)("p",null,"City",-1))),B=o((()=>(0,a._)("option",{disabled:"",value:""},"Choose city",-1))),F=o((()=>(0,a._)("option",null,"Sumy",-1))),Y=o((()=>(0,a._)("option",null,"Kyiv",-1))),q=o((()=>(0,a._)("option",null,"Lviv",-1))),z=o((()=>(0,a._)("option",null,"Odesa",-1))),H=o((()=>(0,a._)("option",null,"Dnipro",-1))),X=o((()=>(0,a._)("option",null,"Kharkiv",-1))),ee=[B,F,Y,q,z,H,X],se={class:"user__content-item"},te=o((()=>(0,a._)("p",null,"Address",-1))),ae=["placeholder"],ie={class:"user__content-item"},le=o((()=>(0,a._)("p",null,"Password",-1))),re=["placeholder"],de={class:"user__content-item"},ne=o((()=>(0,a._)("p",null,"Repeat password",-1))),oe=["placeholder"],ue={key:1},ce={name:"EditUser"};var pe=Object.assign(ce,{props:{id:{type:Number,default:null}},setup(e){const s=(0,n.tv)(),t=(0,n.yj)(),o=(0,d.U)();return(0,a.YP)((()=>o.uploaded),(e=>{e&&"Profile"!==t.name&&s.go(-1)})),(s,t)=>null!==e.id?((0,a.wg)(),(0,a.iD)("div",u,[(0,a._)("div",c,[(0,a._)("div",p,[(0,a._)("div",h,[_,(0,a.wy)((0,a._)("input",{class:"form-control",type:"text",placeholder:s.$t("placeholders.name"),"onUpdate:modelValue":t[0]||(t[0]=s=>(0,i.SU)(o).usersList[e.id].fullName=s)},null,8,m),[[l.vModelText,(0,i.SU)(o).usersList[e.id].fullName]])]),(0,a._)("div",g,[L,(0,a.wy)((0,a._)("input",{class:"form-control",type:"text",placeholder:s.$t("placeholders.username"),"onUpdate:modelValue":t[1]||(t[1]=s=>(0,i.SU)(o).usersList[e.id].username=s)},null,8,v),[[l.vModelText,(0,i.SU)(o).usersList[e.id].username]])]),(0,a._)("div",U,[y,(0,a.wy)((0,a._)("input",{class:"form-control",type:"text",placeholder:s.$t("placeholders.email"),"onUpdate:modelValue":t[2]||(t[2]=s=>(0,i.SU)(o).usersList[e.id].emailChange=s)},null,8,w),[[l.vModelText,(0,i.SU)(o).usersList[e.id].emailChange]])]),(0,a._)("div",f,[S,(0,a.wy)((0,a._)("input",{class:"form-control",type:"text",placeholder:s.$t("placeholders.phone"),"onUpdate:modelValue":t[3]||(t[3]=s=>(0,i.SU)(o).usersList[e.id].phone=s)},null,8,b),[[l.vModelText,(0,i.SU)(o).usersList[e.id].phone]])]),(0,a._)("div",C,[x,(0,a.Wm)((0,i.SU)(r.Z),{placeholder:s.$t("placeholders.birthday"),modelValue:(0,i.SU)(o).usersList[e.id].birthday,"onUpdate:modelValue":t[4]||(t[4]=s=>(0,i.SU)(o).usersList[e.id].birthday=s),"enable-time-picker":!1,"close-on-scroll":""},null,8,["placeholder","modelValue"])]),(0,a._)("div",V,[k,(0,a.wy)((0,a._)("input",{class:"form-control",type:"text",placeholder:s.$t("placeholders.card"),"onUpdate:modelValue":t[5]||(t[5]=s=>(0,i.SU)(o).usersList[e.id].creditCard=s)},null,8,M),[[l.vModelText,(0,i.SU)(o).usersList[e.id].creditCard]])])]),(0,a._)("div",D,[(0,a._)("div",T,[Z,(0,a._)("div",$,[(0,a._)("div",N,[(0,a.wy)((0,a._)("input",{type:"radio",id:"en",value:"en","onUpdate:modelValue":t[6]||(t[6]=s=>(0,i.SU)(o).usersList[e.id].language=s)},null,512),[[l.vModelRadio,(0,i.SU)(o).usersList[e.id].language]]),P]),(0,a._)("div",R,[(0,a.wy)((0,a._)("input",{type:"radio",id:"ua",value:"ua","onUpdate:modelValue":t[7]||(t[7]=s=>(0,i.SU)(o).usersList[e.id].language=s)},null,512),[[l.vModelRadio,(0,i.SU)(o).usersList[e.id].language]]),j])])]),(0,a._)("div",O,[E,(0,a._)("div",G,[(0,a._)("div",I,[(0,a.wy)((0,a._)("input",{type:"radio",id:"male",value:"male","onUpdate:modelValue":t[8]||(t[8]=s=>(0,i.SU)(o).usersList[e.id].gender=s)},null,512),[[l.vModelRadio,(0,i.SU)(o).usersList[e.id].gender]]),J]),(0,a._)("div",W,[(0,a.wy)((0,a._)("input",{type:"radio",id:"female",value:"female","onUpdate:modelValue":t[9]||(t[9]=s=>(0,i.SU)(o).usersList[e.id].gender=s)},null,512),[[l.vModelRadio,(0,i.SU)(o).usersList[e.id].gender]]),A])])]),(0,a._)("div",K,[Q,(0,a.wy)((0,a._)("select",{class:"form-control","onUpdate:modelValue":t[10]||(t[10]=s=>(0,i.SU)(o).usersList[e.id].city=s)},ee,512),[[l.vModelSelect,(0,i.SU)(o).usersList[e.id].city]])]),(0,a._)("div",se,[te,(0,a.wy)((0,a._)("input",{class:"form-control",type:"text",placeholder:s.$t("placeholders.address"),"onUpdate:modelValue":t[11]||(t[11]=s=>(0,i.SU)(o).usersList[e.id].address=s)},null,8,ae),[[l.vModelText,(0,i.SU)(o).usersList[e.id].address]])]),(0,a._)("div",ie,[le,(0,a.wy)((0,a._)("input",{class:"form-control",type:"text",placeholder:s.$t("placeholders.password"),"onUpdate:modelValue":t[12]||(t[12]=s=>(0,i.SU)(o).usersList[e.id].passwordChange=s)},null,8,re),[[l.vModelText,(0,i.SU)(o).usersList[e.id].passwordChange]])]),(0,a._)("div",de,[ne,(0,a.wy)((0,a._)("input",{class:"form-control",type:"text",placeholder:s.$t("placeholders.repeat"),"onUpdate:modelValue":t[13]||(t[13]=s=>(0,i.SU)(o).usersList[e.id].passwordCheck=s)},null,8,oe),[[l.vModelText,(0,i.SU)(o).usersList[e.id].passwordCheck]])])])]),(0,a._)("button",{class:"btn btn-primary",onClick:t[14]||(t[14]=s=>(0,i.SU)(o).saveUser(e.id))},"Save")])):((0,a.wg)(),(0,a.iD)("div",ue," Loading... "))}}),he=t(89);const _e=(0,he.Z)(pe,[["__scopeId","data-v-53f4ec68"]]);var me=_e},4283:function(e,s,t){t.d(s,{Z:function(){return p}});var a=t(3396);const i=e=>((0,a.dD)("data-v-60e77b62"),e=e(),(0,a.Cn)(),e),l={class:"loading"},r=i((()=>(0,a._)("span",null,null,-1))),d=[r];function n(e,s,t,i,r,n){return(0,a.wg)(),(0,a.iD)("div",l,d)}var o={name:"TheLoading"},u=t(89);const c=(0,u.Z)(o,[["render",n],["__scopeId","data-v-60e77b62"]]);var p=c},8591:function(e,s,t){t.r(s),t.d(s,{default:function(){return _}});var a=t(3396),i=t(4870),l=t(9242),r=t(988),d=t(4283),n=t(5549);const o={class:"user"},u={name:"AdminUser"};var c=Object.assign(u,{props:["id","parent"],setup(e){const s=(0,r.U)();return(t,r)=>((0,a.wg)(),(0,a.iD)("div",o,[(0,a.wy)((0,a.Wm)((0,i.SU)(d.Z),null,null,512),[[l.vShow,(0,i.SU)(s).loading]]),(0,a.Wm)((0,i.SU)(n.Z),{id:e.id},null,8,["id"])]))}}),p=t(89);const h=(0,p.Z)(c,[["__scopeId","data-v-36f3d06e"]]);var _=h}}]);
//# sourceMappingURL=user.959dc4ff.js.map