{"version":3,"file":"js/users.aa440393.js","mappings":"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","sources":["webpack://kino-cms/./node_modules/vue-loader/dist/exportHelper.js","webpack://kino-cms/./src/stores/users.js","webpack://kino-cms/./src/components/ThePagination.vue","webpack://kino-cms/./src/components/ThePagination.vue?5c0d","webpack://kino-cms/./src/pages/admin/AdminUsers.vue","webpack://kino-cms/./src/pages/admin/AdminUsers.vue?9edd"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","import { defineStore } from 'pinia';\r\nimport { collection, deleteDoc, doc, getDocs, setDoc } from \"firebase/firestore\";\r\nimport { db, secondaryApp } from \"@/firebase/firebase\";\r\nimport {getAuth, updatePassword, updateEmail, deleteUser, signInWithEmailAndPassword} from \"firebase/auth\";\r\n\r\n\r\nexport const useUsersStore = defineStore({\r\n    id: \"Users\",\r\n    state: () => ({\r\n        loading: false,\r\n        showModal: false,\r\n        usersList: [],\r\n        uploaded: false,\r\n    }),\r\n    actions: {\r\n        async getUsers() {\r\n            this.loading = true;\r\n            this.usersList = [];\r\n            const usersData = await getDocs(collection(db, 'users'));\r\n            usersData.forEach((doc) => {\r\n                this.usersList.push({\r\n                    id: this.usersList.length,\r\n                    name: doc.id,\r\n                    email: doc.data().email,\r\n                    password: doc.data().password,\r\n                    username: doc.data().username,\r\n                    registrationDate: doc.data().registrationDate,\r\n                    fullName: doc.data().fullName,\r\n                    phone: doc.data().phone,\r\n                    creditCard: doc.data().creditCard,\r\n                    birthday: doc.data().birthday,\r\n                    city: doc.data().city,\r\n                    address: doc.data().address,\r\n                    gender: doc.data().gender,\r\n                    language: doc.data().language,\r\n                    emailChange: doc.data().email,\r\n                    passwordChange: '',\r\n                    passwordCheck: ''\r\n                })\r\n            });\r\n            for (let i = 0; i < this.usersList.length; i++) {\r\n                if (typeof this.usersList[i].birthday === 'object') {\r\n                    this.usersList[i].birthday = new Date(this.usersList[i].birthday.seconds*1000);\r\n                }\r\n            }\r\n            this.loading = false;\r\n        },\r\n        async deleteUser(id) {\r\n            this.showModal = false;\r\n            this.loading = true;\r\n            const auth = getAuth(secondaryApp);\r\n            signInWithEmailAndPassword(auth, this.usersList[id].email, this.usersList[id].password)\r\n                .then((userCredential) => {\r\n                    const user = userCredential.user;\r\n                    deleteUser(user).then(async () => {\r\n                        await deleteDoc(doc(db, \"users\", this.usersList[id].name));\r\n                        this.usersList.splice(id, 1);\r\n                        for (let i = 0; i < this.usersList.length; i++) {\r\n                            if (this.usersList[i].id !== i) {\r\n                                this.usersList[i].id = i;\r\n                            }\r\n                        }\r\n                    }).catch((e) => {\r\n                        console.log(e);\r\n                    });\r\n                })\r\n                .catch((error) => {\r\n                    console.log(error);\r\n                });\r\n            this.loading = false;\r\n        },\r\n        async saveUser(id) {\r\n            this.loading = true;\r\n            this.uploaded = false;\r\n            const auth = getAuth(secondaryApp);\r\n            signInWithEmailAndPassword(auth, this.usersList[id].email, this.usersList[id].password)\r\n                .then(async (userCredential) => {\r\n                    const user = userCredential.user;\r\n                    if (user.email !== this.usersList[id].emailChange) {\r\n                        this.usersList[id].email = this.usersList[id].emailChange;\r\n                        updateEmail(user, this.usersList[id].emailChange).catch((error) => {\r\n                            console.log(error);\r\n                        });\r\n                    }\r\n                    if (this.usersList[id].passwordChange !== '' && this.usersList[id].passwordChange === this.usersList[id].passwordCheck && this.usersList[id].password !== this.usersList[id].passwordChange) {\r\n                        this.usersList[id].password = this.usersList[id].passwordChange;\r\n                        updatePassword(user, this.usersList[id].password).catch((error) => {\r\n                            console.log(error);\r\n                        });\r\n                    }\r\n                    const userData = {\r\n                        email: this.usersList[id].email,\r\n                        password: this.usersList[id].password,\r\n                        username: this.usersList[id].username,\r\n                        registrationDate: this.usersList[id].registrationDate,\r\n                        fullName: this.usersList[id].fullName,\r\n                        phone: this.usersList[id].phone,\r\n                        creditCard: this.usersList[id].creditCard,\r\n                        birthday: this.usersList[id].birthday,\r\n                        city: this.usersList[id].city,\r\n                        address: this.usersList[id].address,\r\n                        gender: this.usersList[id].gender,\r\n                        language: this.usersList[id].language\r\n                    }\r\n                    await setDoc(doc(db, \"users\", this.usersList[id].name), userData).then(() => {\r\n                        this.uploaded = true;\r\n                    });\r\n                }).catch((error) => {\r\n                    console.log(error);\r\n                });\r\n            this.loading = false;\r\n        }\r\n    }\r\n})","<template>\r\n  <ul class=\"pagination\" v-if=\"totalPages > 1\">\r\n    <li class=\"paginate_button page-item previous\" :class=\"{disabled: currentPage===1}\" id=\"example1_previous\" >\r\n      <button class=\"page-link\" :disabled=\"currentPage === 1\" @click=\"$emit('changePage', 'previous')\">Previous</button>\r\n    </li>\r\n    <li class=\"paginate_button page-item\" :class=\"{active: currentPage===page}\" v-for=\"page in totalPages\" :key=\"page\" @click=\"$emit('changePage', page)\">\r\n      <p class=\"page-link\">{{page}}</p>\r\n    </li>\r\n    <li class=\"paginate_button page-item next\" :class=\"{disabled: currentPage===totalPages}\" id=\"example1_next\" >\r\n      <button class=\"page-link\" :disabled=\"currentPage === totalPages\" @click=\"$emit('changePage', 'next')\">Next</button>\r\n    </li>\r\n  </ul>\r\n</template>\r\n\r\n<script setup>\r\n\r\ndefineProps({\r\n  totalPages: {\r\n    type: Number,\r\n    required: true\r\n  },\r\n  currentPage: {\r\n    type: Number,\r\n    default: 1\r\n  }\r\n})\r\n\r\n</script>\r\n\r\n<script>\r\nexport default {\r\n  name: \"ThePagination\"\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.page-link {\r\n  cursor: pointer;\r\n  margin: 0;\r\n}\r\n</style>","import script from \"./ThePagination.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ThePagination.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ThePagination.vue?vue&type=style&index=0&id=7dea5bb3&scoped=true&lang=css\"\n\nimport exportComponent from \"S:\\\\Projects\\\\kino-cms\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7dea5bb3\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"users\">\r\n    <TheLoading v-show=\"usersStore.loading\" />\r\n    <h2 v-if=\"$route.name !== 'ChooseUsers'\">List of users</h2>\r\n    <div class=\"users__search\">\r\n      <input class=\"form-control\" type=\"text\" placeholder=\"Search\" v-model=\"searchInput\" />\r\n    </div>\r\n    <ItemList\r\n        :route-name=\"'User'\"\r\n        :items=\"paginatedUsers\"\r\n        :show-modal=\"usersStore.showModal\"\r\n        :search = \"searchInput\"\r\n        @toggleModal=\"usersStore.showModal = true\"\r\n        @closeModal=\"usersStore.showModal = false\"\r\n        @deleteItem=\"usersStore.deleteUser\"\r\n        @sortArray=\"sortArray\"\r\n    />\r\n    <ThePagination\r\n        :totalPages=\"pages\"\r\n        :currentPage=\"currentPage\"\r\n        @changePage=\"updatePage\"\r\n    />\r\n    <button v-if=\"$route.name === 'ChooseUsers'\" @click=\"$router.go(-1)\">Confirm selection</button>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport {useUsersStore} from \"@/stores/users\";\r\nimport TheLoading from \"@/components/admin/TheLoading\";\r\nimport ItemList from \"@/components/admin/ItemList\";\r\nimport ThePagination from \"@/components/ThePagination\";\r\nimport {onBeforeMount, reactive, ref, watch, computed} from \"vue\";\r\n\r\n\r\nlet users = reactive([]);\r\nconst usersStore = useUsersStore();\r\nusersStore.getUsers();\r\nonBeforeMount(() => {\r\n  users = usersStore.usersList;\r\n});\r\n\r\n\r\nconst usersPerPage = ref(5);\r\nconst currentPage = ref(1);\r\n\r\n\r\nconst sortingBy = ref('');\r\nconst sortingDirection = ref(false);\r\nfunction sortArray(field, direction) {\r\n  users = usersStore.usersList;\r\n  sortingBy.value = field;\r\n  sortingDirection.value = direction;\r\n  currentPage.value = 1;\r\n}\r\nconst sortedUsers = computed(() => {\r\n  let arrayToSort = users;\r\n  if (sortingBy.value.includes('registrationDate')) {\r\n    if (!sortingDirection.value) {\r\n     return arrayToSort.sort((a, b) => (new Date(a.registrationDate) - new Date(b.registrationDate)))\r\n    }\r\n    else {\r\n      return arrayToSort.sort((a, b) => (new Date(b.registrationDate) - new Date(a.registrationDate)))\r\n    }\r\n  }\r\n  else if (sortingBy.value.includes('birthday')) {\r\n    if (!sortingDirection.value) {\r\n      return arrayToSort.sort((a, b) => (a.birthday - b.birthday))\r\n    }\r\n    else {\r\n      return arrayToSort.sort((a, b) => (b.birthday - a.birthday))\r\n    }\r\n  }\r\n  else if (sortingBy.value.includes('email')) {\r\n    if (!sortingDirection.value) {\r\n      return arrayToSort.sort((a, b) => (a.email > b.email ? 1 : -1))\r\n    }\r\n    else {\r\n      return arrayToSort.sort((a, b) => (b.email > a.email ? 1 : -1))\r\n    }\r\n  }\r\n  else if (sortingBy.value.includes('phone')) {\r\n    if (!sortingDirection.value) {\r\n      return arrayToSort.sort((a, b) => (a.phone - b.phone))\r\n    }\r\n    else {\r\n      return arrayToSort.sort((a, b) => (b.phone - a.phone))\r\n    }\r\n  }\r\n  else if (sortingBy.value.includes('fullName')) {\r\n    if (!sortingDirection.value) {\r\n      return arrayToSort.sort((a, b) => (a.fullName.toLowerCase() > b.fullName.toLowerCase() ? 1 : -1))\r\n    }\r\n    else {\r\n      return arrayToSort.sort((a, b) => (b.fullName.toLowerCase() > a.fullName.toLowerCase() ? 1 : -1))\r\n    }\r\n  }\r\n  else if (sortingBy.value.includes('username')) {\r\n    if (!sortingDirection.value) {\r\n      return arrayToSort.sort((a, b) => (a.username > b.username ? 1 : -1))\r\n    }\r\n    else {\r\n      return arrayToSort.sort((a, b) => (b.username > a.username ? 1 : -1))\r\n    }\r\n  }\r\n  else if (sortingBy.value.includes('city')) {\r\n    if (!sortingDirection.value) {\r\n      return arrayToSort.sort((a, b) => (a.city > b.city ? 1 : -1))\r\n    }\r\n    else {\r\n      return arrayToSort.sort((a, b) => (b.city > a.city ? 1 : -1))\r\n    }\r\n  }\r\n  else {\r\n    if (!sortingDirection.value) {\r\n      return arrayToSort.sort((a, b) => (a.id > b.id ? 1 : -1))\r\n    }\r\n    else {\r\n      return arrayToSort.sort((a, b) => (b.id > a.id ? 1 : -1))\r\n    }\r\n  }\r\n});\r\n\r\n\r\n\r\nconst searchInput = ref('');\r\nconst searchFields = ['id','registrationDate','birthday','email','phone','fullName','username','city'];\r\nwatch(() => searchInput.value, (input) => {\r\n  currentPage.value = 1;\r\n  if (input === '') {\r\n    users = usersStore.usersList;\r\n  }\r\n});\r\nconst searchedUsers = computed(() => {\r\n  let arrayToSearch = [];\r\n  sortedUsers.value.filter( (user) => {\r\n    let str = ''\r\n    for (let field in user) {\r\n      searchFields.forEach((searchField) => {\r\n        if (searchField === field) {\r\n          str += user[field] + ' ';\r\n        }\r\n      });\r\n    }\r\n    if (str.toLowerCase().includes(searchInput.value.toLowerCase())) {\r\n      arrayToSearch.push(user)\r\n    }\r\n  });\r\n  return arrayToSearch;\r\n});\r\n\r\n\r\n\r\nconst pages = computed(() => {\r\n  return Math.ceil(searchedUsers.value.length / usersPerPage.value);\r\n});\r\nfunction updatePage(page) {\r\n  if (page === 'previous') {\r\n    currentPage.value--;\r\n  }\r\n  else if (page === 'next') {\r\n    currentPage.value++;\r\n  }\r\n  else {\r\n    currentPage.value = page;\r\n  }\r\n}\r\nconst paginatedUsers = computed(() => {\r\n  let from = (currentPage.value - 1) * usersPerPage.value;\r\n  let to = from + usersPerPage.value;\r\n  return searchedUsers.value.slice(from, to)\r\n});\r\n\r\n</script>\r\n\r\n<script>\r\nexport default {\r\n  name: \"AdminUsers\",\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.users {\r\n  padding: 40px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 20px;\r\n}\r\n.users__search {\r\n  width: 100%;\r\n}\r\n/*input {*/\r\n/*  max-width: 500px;*/\r\n/*}*/\r\n</style>","import script from \"./AdminUsers.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AdminUsers.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./AdminUsers.vue?vue&type=style&index=0&id=5a8a9c93&scoped=true&lang=css\"\n\nimport exportComponent from \"S:\\\\Projects\\\\kino-cms\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5a8a9c93\"]])\n\nexport default __exports__"],"names":["exports","sfc","props","target","__vccOpts","key","val","useUsersStore","defineStore","id","state","loading","showModal","usersList","uploaded","actions","async","this","usersData","getDocs","collection","db","forEach","doc","push","length","name","email","data","password","username","registrationDate","fullName","phone","creditCard","birthday","city","address","gender","language","emailChange","passwordChange","passwordCheck","i","Date","seconds","auth","getAuth","secondaryApp","signInWithEmailAndPassword","then","userCredential","user","deleteUser","deleteDoc","splice","catch","e","console","log","error","updateEmail","updatePassword","userData","setDoc","__exports__","users","reactive","usersStore","getUsers","onBeforeMount","usersPerPage","ref","currentPage","sortingBy","sortingDirection","sortArray","field","direction","value","sortedUsers","computed","arrayToSort","includes","sort","a","b","toLowerCase","searchInput","searchFields","watch","input","searchedUsers","arrayToSearch","filter","str","searchField","pages","Math","ceil","updatePage","page","paginatedUsers","from","to","slice"],"sourceRoot":""}