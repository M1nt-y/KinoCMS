{"version":3,"file":"js/onenews.9d5e46d9.js","mappings":"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","sources":["webpack://kino-cms/./node_modules/vue-loader/dist/exportHelper.js","webpack://kino-cms/./src/stores/news.js","webpack://kino-cms/./src/components/admin/ImageGallery.vue","webpack://kino-cms/./src/components/admin/ImageGallery.vue?686f","webpack://kino-cms/./src/components/admin/ImageInput.vue","webpack://kino-cms/./src/components/admin/ImageInput.vue?9044","webpack://kino-cms/./src/components/admin/SeoInputs.vue","webpack://kino-cms/./src/components/admin/SeoInputs.vue?c3be","webpack://kino-cms/./src/components/admin/TheLoading.vue","webpack://kino-cms/./src/components/admin/TheLoading.vue?187b","webpack://kino-cms/./src/pages/admin/AdminOneNews.vue","webpack://kino-cms/./src/pages/admin/AdminOneNews.vue?f2ee"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","import { defineStore } from 'pinia'\r\nimport {deleteObject, getDownloadURL, ref, uploadBytes} from \"firebase/storage\";\r\nimport {db, storage} from \"@/firebase/firebase\";\r\nimport {collection, deleteDoc, doc, getDocs, setDoc} from \"firebase/firestore\";\r\n\r\n\r\nexport const useNewsStore = defineStore({\r\n    id: \"News\",\r\n     state: () => ({\r\n         loading: false,\r\n         newsList: [],\r\n         showModal: false,\r\n         uploaded: false\r\n     }),\r\n    actions: {\r\n        async getNews() {\r\n            this.loading = true;\r\n            this.newsList = [];\r\n            const newsData = await getDocs(collection(db, 'news'));\r\n            // get news data\r\n            newsData.forEach((doc) => {\r\n                this.newsList.push({\r\n                    id: this.newsList.length,\r\n                    name: doc.id,\r\n                    uploaded: true,\r\n                    creationDate: doc.data().creationDate,\r\n                    status: doc.data().status,\r\n                    language: doc.data().language,\r\n                    data: doc.data().data,\r\n                    images: [\r\n                        {\r\n                            main: {\r\n                                name: doc.data().data[0].main.name,\r\n                                image: null,\r\n                                url: doc.data().data[0].main.url,\r\n                                uploaded: true\r\n                            },\r\n                            gallery: [],\r\n                            deleted: []\r\n                        },\r\n                        {\r\n                            main: {\r\n                                name: doc.data().data[1].main.name,\r\n                                image: null,\r\n                                url: doc.data().data[1].main.url,\r\n                                uploaded: true\r\n                            },\r\n                            gallery: [],\r\n                            deleted: []\r\n                        }\r\n                    ]\r\n                });\r\n            });\r\n            this.newsList.forEach((news) => {\r\n                for (let i = 0; i < news.data.length; i++) {\r\n                    // get news gallery\r\n                    for (let j = 0; j < news.data[i].gallery.length; j++) {\r\n                        news.images[i].gallery.push({\r\n                            id: news.images[i].gallery.length,\r\n                            name: news.data[i].gallery[j].name,\r\n                            uploaded: true,\r\n                            image: null,\r\n                            url: news.data[i].gallery[j].url\r\n                        });\r\n                    }\r\n                    // change date from object to date\r\n                    if (typeof news.data[i].publicationDate === 'object') {\r\n                        news.data[i].publicationDate = new Date(news.data[i].publicationDate.seconds*1000);\r\n                    }\r\n                }\r\n            });\r\n            this.loading = false;\r\n        },\r\n        async deleteNews(id) {\r\n            this.showModal = false;\r\n            this.loading = true;\r\n            if (this.newsList[id].uploaded) {\r\n                // delete data\r\n                await deleteDoc(doc(db, \"news\", this.newsList[id].name));\r\n                // delete images\r\n                for (let i = 0; i < this.newsList[id].images.length; i++) {\r\n                    // delete main image\r\n                    if (this.newsList[id].images[i].main.name !== null) {\r\n                        const delRef = ref(storage, 'news/main/' + this.newsList[id].images[i].main.name);\r\n                        await deleteObject(delRef).catch((error) => {\r\n                            console.error(error);\r\n                        });\r\n                    }\r\n                    // delete images from gallery\r\n                    if (this.newsList[id].images[i].gallery.length !== 0) {\r\n                        for (let j = 0; j < this.newsList[id].images[i].gallery.length; j++) {\r\n                            const delRef = ref(storage, 'news/gallery/' + this.newsList[id].images[i].gallery[j].name);\r\n                            await deleteObject(delRef).catch((error) => {\r\n                                console.error(error);\r\n                            });\r\n                        }\r\n                    }\r\n                    if (this.newsList[id].images[i].deleted.length !== 0) {\r\n                        for (let j = 0; j < this.newsList[id].images[i].deleted.length; j++) {\r\n                            const delRef = ref(storage, 'news/gallery/' + this.newsList[id].images[i].deleted[j].name);\r\n                            await deleteObject(delRef).catch((error) => {\r\n                                console.error(error);\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            this.newsList.splice(id, 1);\r\n            for (let i = 0; i < this.newsList.length; i++) {\r\n                if (this.newsList[i].id !== i) {\r\n                    this.newsList[i].id = i;\r\n                }\r\n            }\r\n            this.loading = false;\r\n        },\r\n        async uploadNews(id) {\r\n            this.loading = true;\r\n            this.uploaded = false;\r\n            // upload news images\r\n            for (let i = 0; i < this.newsList[id].images.length; i++) {\r\n                // upload main image (update if was changed)\r\n                if (this.newsList[id].images[i].main.image !== null) {\r\n                    try {\r\n                        const mainRef = ref(storage, \"news/main/\" + this.newsList[id].images[i].main.name);\r\n                        await uploadBytes(mainRef, this.newsList[id].images[i].main.image).then(async () => {\r\n                            await getDownloadURL(mainRef).then((url) => {\r\n                                this.newsList[id].data[i].main.url = url;\r\n                            });\r\n                        });\r\n                    } catch (e) {\r\n                        console.error(\"Error uploading image: \", e);\r\n                    }\r\n                }\r\n                // delete images from gallery\r\n                if (this.newsList[id].images[i].deleted.length !== 0) {\r\n                    for (let j = 0; j < this.newsList[id].images[i].deleted.length; j++) {\r\n                        const delRef = ref(storage, \"news/gallery/\" + this.newsList[id].images[i].deleted[j]);\r\n                        await deleteObject(delRef).then(() => {\r\n                            this.newsList[id].images[i].deleted.splice(j, 1);\r\n                        }).catch((error) => {\r\n                            console.error(error);\r\n                        });\r\n                    }\r\n                }\r\n                // upload images from gallery\r\n                for (let j = 0; j < this.newsList[id].images[i].gallery.length; j++) {\r\n                    if (this.newsList[id].images[i].gallery[j].image !== null) {\r\n                        try {\r\n                            const galleryRef = ref(storage, \"news/gallery/\" + this.newsList[id].images[i].gallery[j].name);\r\n                            await uploadBytes(galleryRef, this.newsList[id].images[i].gallery[j].image).then(async () => {\r\n                                await getDownloadURL(galleryRef).then((url) => {\r\n                                    this.movieList[id].data[i].gallery[j].url = url;\r\n                                });\r\n                            });\r\n                        } catch (e) {\r\n                            console.error(\"Error uploading image: \", e);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            for (let i = 0; i < this.newsList[id].data.length; i++) {\r\n                for (let j = 0; j < this.newsList[id].data[i].gallery.length; j++) {\r\n                    if (this.newsList[id].data[i].gallery[j].url !== null && j === this.newsList[id].data[i].gallery.length-1 && i === this.newsList[id].data.length-1) {\r\n                        this.uploadNewsData(id);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        async uploadNewsData(id) {\r\n            const docData = {\r\n                creationDate: this.newsList[id].creationDate,\r\n                status: this.newsList[id].status,\r\n                language: this.newsList[id].language,\r\n                data: this.newsList[id].data,\r\n            }\r\n            await setDoc(doc(db, \"news\", this.newsList[id].name), docData).then(() => {\r\n                this.loading = false;\r\n                this.uploaded = true;\r\n            });\r\n        }\r\n    }\r\n})","<template>\r\n  <div class=\"gallery\">\r\n    <div class=\"gallery__item\" v-for=\"image in gallery\" :key=\"image.id\">\r\n      <img class=\"gallery__item-preview\" :src=\"image.url\" alt=\"\">\r\n      <div class=\"gallery__item-delete\" @click=\"emit('deleteImage', image.id)\">\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\r\n          <g transform=\"scale(1.5)\">\r\n            <circle style=\"fill:#f44336\" cx=\"8\" cy=\"8\" r=\"7\"/>\r\n            <rect style=\"fill:#ffffff\" width=\"2\" height=\"10\" x=\"-.98\" y=\"-16.29\" transform=\"rotate(135)\"/>\r\n            <rect style=\"fill:#ffffff\" width=\"2\" height=\"10\" x=\"-12.29\" y=\"-5.01\" transform=\"rotate(-135)\"/>\r\n          </g>\r\n        </svg>\r\n      </div>\r\n    </div>\r\n    <label class=\"gallery__add\">\r\n      <span>\r\n        <svg width=\"40px\" height=\"40px\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n          <path d=\"M8 12H16\" stroke=\"#292D32\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n          <path d=\"M12 16V8\" stroke=\"#292D32\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n          <path d=\"M9 22H15C20 22 22 20 22 15V9C22 4 20 2 15 2H9C4 2 2 4 2 9V15C2 20 4 22 9 22Z\" stroke=\"#292D32\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n        </svg>\r\n      </span>\r\n      <input\r\n          class=\"gallery__input\"\r\n          type=\"file\" multiple=\"multiple\" accept=\"image/*\"\r\n          @change=\"galleryImagesSelected($event)\"\r\n      >\r\n    </label>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\ndefineProps(['gallery']);\r\n\r\nconst emit = defineEmits(['getImage', 'deleteImage'])\r\n\r\nfunction galleryImagesSelected(input) {\r\n  let images = input.target.files;\r\n  for (let i = 0; i < images.length; i++) {\r\n    emit('getImage', images[i]);\r\n  }\r\n}\r\n</script>\r\n\r\n<script>\r\nexport default {\r\n  name: \"ImageGallery\"\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.gallery {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  align-items: center;\r\n  gap: 15px;\r\n}\r\n.gallery__item {\r\n  position: relative;\r\n}\r\n.gallery__item-preview {\r\n  width: 130px;\r\n  height: 80px;\r\n}\r\n.gallery__add {\r\n  cursor: pointer;\r\n}\r\n.gallery__item-delete {\r\n  position: absolute;\r\n  top: -10px;\r\n  right: -10px;\r\n  cursor: pointer;\r\n  z-index: 1;\r\n}\r\n.gallery__input {\r\n  display: none;\r\n}\r\n</style>","import script from \"./ImageGallery.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ImageGallery.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ImageGallery.vue?vue&type=style&index=0&id=72d8384d&scoped=true&lang=css\"\n\nimport exportComponent from \"S:\\\\Projects\\\\kino-cms\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-72d8384d\"]])\n\nexport default __exports__","<template>\r\n  <label class=\"image\">\r\n    <img class=\"image__preview\" src=\"@/assets/images/image-icon.png\" alt=\"\" v-if=\"input.url === null\">\r\n    <img class=\"image__preview\" :src=\"input.url\" alt=\"\" v-else>\r\n    <input type=\"file\" class=\"image__input\" accept=\"image/*\" @change=\"imageSelected($event)\" />\r\n  </label>\r\n</template>\r\n\r\n<script setup>\r\ndefineProps(['input'])\r\n\r\nconst emit = defineEmits(['getImage'])\r\n\r\nfunction imageSelected(image) {\r\n  if (image) {\r\n    let file = image.target.files[0];\r\n    emit('getImage', file);\r\n  }\r\n}\r\n</script>\r\n\r\n<script>\r\nexport default {\r\n  name: \"ImageInput\"\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.image__preview {\r\n  max-width: 130px;\r\n}\r\n.image__input {\r\n  display: none;\r\n}\r\n</style>","import script from \"./ImageInput.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ImageInput.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ImageInput.vue?vue&type=style&index=0&id=0596ccba&scoped=true&lang=css\"\n\nimport exportComponent from \"S:\\\\Projects\\\\kino-cms\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0596ccba\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"seo\">\r\n    <p>SEO</p>\r\n    <div class=\"seo__content\">\r\n      <div class=\"seo__content-item\">\r\n        <p>URL</p>\r\n        <input class=\"form-control\" type=\"text\" placeholder=\"URL\" :value=\"url\" @input=\"$emit('update:url', $event.target.value)\">\r\n      </div>\r\n      <div class=\"seo__content-item\">\r\n        <p>Title</p>\r\n        <input class=\"form-control\" type=\"text\" placeholder=\"Title\" :value=\"title\" @input=\"$emit('update:title', $event.target.value)\">\r\n      </div>\r\n      <div class=\"seo__content-item\">\r\n        <p>Keywords</p>\r\n        <input class=\"form-control\" type=\"text\" placeholder=\"Keywords\" :value=\"keywords\" @input=\"$emit('update:keywords', $event.target.value)\">\r\n      </div>\r\n      <div class=\"seo__content-item\">\r\n        <p>Description</p>\r\n        <textarea class=\"form-control\" placeholder=\"Description\" :value=\"description\" @input=\"$emit('update:description', $event.target.value)\"/>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\n\r\ndefineProps(['url', 'title', 'keywords', 'description'])\r\n\r\n</script>\r\n\r\n<script>\r\nexport default {\r\n  name: \"SeoInputs\"\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.seo {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 20px;\r\n  width: 100%;\r\n}\r\n\r\n.seo__content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20px;\r\n  width: 100%;\r\n}\r\n.seo__content-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 20px;\r\n  width: 100%;\r\n}\r\n\r\n.seo p,\r\n.seo__content-item p {\r\n  min-width: 85px;\r\n}\r\n\r\np {\r\n  margin: 0;\r\n}\r\ninput {\r\n  max-width: 500px;\r\n}\r\n</style>","import script from \"./SeoInputs.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./SeoInputs.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./SeoInputs.vue?vue&type=style&index=0&id=ca697e0a&scoped=true&lang=css\"\n\nimport exportComponent from \"S:\\\\Projects\\\\kino-cms\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-ca697e0a\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"loading\">\r\n    <span></span>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"TheLoading\"\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.loading {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  z-index: 2023;\r\n  height: 100vh;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  animation: spin;\r\n}\r\n@keyframes spin {\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n.loading span {\r\n  display: block;\r\n  width: 60px;\r\n  height: 60px;\r\n  margin: 0 auto;\r\n  border: 3px solid transparent;\r\n  border-top-color: #FFFFFF;\r\n  border-bottom-color: #FFFFFF;\r\n  border-radius: 50%;\r\n  animation: spin ease 1000ms infinite;\r\n}\r\n</style>","import { render } from \"./TheLoading.vue?vue&type=template&id=60e77b62&scoped=true\"\nimport script from \"./TheLoading.vue?vue&type=script&lang=js\"\nexport * from \"./TheLoading.vue?vue&type=script&lang=js\"\n\nimport \"./TheLoading.vue?vue&type=style&index=0&id=60e77b62&scoped=true&lang=css\"\n\nimport exportComponent from \"S:\\\\Projects\\\\kino-cms\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-60e77b62\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"one-news\">\r\n    <TheLoading v-show=\"newsStore.loading\" />\r\n    <div class=\"one-news__controls\">\r\n      <div class=\"one-news__status\">\r\n        Status:\r\n        <input type=\"checkbox\" id=\"checkbox\" v-model=\"newsStore.newsList[id].status\" />\r\n        <label for=\"checkbox\">{{ newsStore.newsList[id].status }}</label>\r\n      </div>\r\n      <div class=\"one-news__languages\">\r\n        <div class=\"one-news__languages-radio\">\r\n          <input type=\"radio\" id=\"en\" value=\"en\" v-model=\"newsStore.newsList[id].language.selected\">\r\n          <label for=\"en\">en</label>\r\n        </div>\r\n        <div class=\"one-news__languages-radio\">\r\n          <input type=\"radio\" id=\"ua\" value=\"ua\" v-model=\"newsStore.newsList[id].language.selected\">\r\n          <label for=\"ua\">ua</label>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"one-news__wrapper\">\r\n      <div class=\"one-news__content\">\r\n        <div class=\"one-news__content-top\">\r\n\r\n          <div class=\"one-news__content-item\">\r\n            <p>Title</p>\r\n            <input class=\"form-control\" type=\"text\" placeholder=\"Title\" v-model=\"newsStore.newsList[id].data[newsStore.newsList[id].language.index].title\">\r\n          </div>\r\n\r\n          <div class=\"one-news__content-item\">\r\n            <p>Publication date</p>\r\n            <Datepicker\r\n                v-model=\"newsStore.newsList[id].data[newsStore.newsList[id].language.index].publicationDate\"\r\n                close-on-scroll\r\n            />\r\n          </div>\r\n\r\n        </div>\r\n        <div class=\"one-news__content-item\">\r\n          <p>Description</p>\r\n          <textarea class=\"form-control\" placeholder=\"Description\" v-model=\"newsStore.newsList[id].data[newsStore.newsList[id].language.index].description\" />\r\n        </div>\r\n        <div class=\"one-news__content-item\">\r\n          <p>Main image</p>\r\n          <ImageInput\r\n              :input=\"newsStore.newsList[id].images[newsStore.newsList[id].language.index].main\"\r\n              @getImage=\"addMainImage\"\r\n          />\r\n        </div>\r\n        <div class=\"one-news__content-item\">\r\n          <p>Gallery</p>\r\n          <ImageGallery\r\n              :gallery=\"newsStore.newsList[id].images[newsStore.newsList[id].language.index].gallery\"\r\n              @getImage=\"addImage\"\r\n              @deleteImage=\"deleteImage\"\r\n          />\r\n        </div>\r\n        <div class=\"one-news__content-item\">\r\n          <p>Video link</p>\r\n          <input class=\"form-control\" type=\"text\" placeholder=\"Link\" v-model=\"newsStore.newsList[id].data[newsStore.newsList[id].language.index].videoLink\">\r\n        </div>\r\n        <div class=\"one-news__content-item\">\r\n          <SeoInputs\r\n              v-model:url=\"newsStore.newsList[id].data[newsStore.newsList[id].language.index].seo.url\"\r\n              v-model:title=\"newsStore.newsList[id].data[newsStore.newsList[id].language.index].seo.title\"\r\n              v-model:keywords=\"newsStore.newsList[id].data[newsStore.newsList[id].language.index].seo.keywords\"\r\n              v-model:description=\"newsStore.newsList[id].data[newsStore.newsList[id].language.index].seo.description\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <button class=\"btn btn-primary\" @click=\"newsStore.uploadNews(id)\">Save</button>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { watch } from \"vue\";\r\nimport { useNewsStore } from \"@/stores/news\";\r\nimport Datepicker from '@vuepic/vue-datepicker';\r\nimport '@vuepic/vue-datepicker/dist/main.css'\r\nimport TheLoading from \"@/components/admin/TheLoading\";\r\nimport ImageGallery from \"@/components/admin/ImageGallery\";\r\nimport ImageInput from \"@/components/admin/ImageInput\";\r\nimport SeoInputs from \"@/components/admin/SeoInputs\";\r\nimport {useRouter} from \"vue-router\";\r\n\r\nconst router = useRouter();\r\n\r\nconst newsStore = useNewsStore();\r\n\r\nconst props = defineProps(['id', 'parent']);\r\n\r\nwatch(() => newsStore.newsList[props.id].language.selected, () => {\r\n  if (newsStore.newsList[props.id].language.selected === 'en') {\r\n    newsStore.newsList[props.id].language.index = 0;\r\n  }\r\n  else {\r\n    newsStore.newsList[props.id].language.index = 1;\r\n  }\r\n});\r\n\r\nfunction addMainImage(image) {\r\n  let lang = newsStore.newsList[props.id].language.index;\r\n  if (lang === 0) {\r\n    newsStore.newsList[props.id].data[lang].main.name = newsStore.newsList[props.id].images[lang].main.name = newsStore.newsList[props.id].name + \"-en\";\r\n  }\r\n  else {\r\n    newsStore.newsList[props.id].data[lang].main.name = newsStore.newsList[props.id].images[lang].main.name = newsStore.newsList[props.id].name + \"-ua\";\r\n  }\r\n  newsStore.newsList[props.id].images[lang].main.image = image;\r\n  newsStore.newsList[props.id].images[lang].main.url = URL.createObjectURL(image);\r\n  newsStore.newsList[props.id].images[lang].main.uploaded = false;\r\n}\r\nfunction addImage(image) {\r\n  let lang = newsStore.newsList[props.id].language.index;\r\n  let i = newsStore.newsList[props.id].data[lang].gallery.length;\r\n  if (lang === 0) {\r\n    newsStore.newsList[props.id].data[lang].gallery.push({\r\n      id: i,\r\n      name: newsStore.newsList[props.id].name + '-' + Date.now() + '-en',\r\n      url: null\r\n    });\r\n  }\r\n  else {\r\n    newsStore.newsList[props.id].data[lang].gallery.push({\r\n      id: i,\r\n      name: newsStore.newsList[props.id].name + '-' + Date.now() + '-ua',\r\n      url: null\r\n    });\r\n  }\r\n  newsStore.newsList[props.id].images[lang].gallery.push({\r\n    id: i,\r\n    name: newsStore.newsList[props.id].data[lang].gallery[i].name,\r\n    uploaded: false,\r\n    image: image,\r\n    url: URL.createObjectURL(image)\r\n  });\r\n}\r\nfunction deleteImage(index) {\r\n  let lang = newsStore.newsList[props.id].language.index;\r\n  if (newsStore.newsList[props.id].images[lang].gallery[index].uploaded) {\r\n    newsStore.newsList[props.id].images[lang].deleted.push(newsStore.newsList[props.id].images[lang].gallery[index].name)\r\n  }\r\n  newsStore.newsList[props.id].data[lang].gallery.splice(index, 1);\r\n  newsStore.newsList[props.id].images[lang].gallery.splice(index, 1);\r\n  for (let i = 0; i < newsStore.newsList[props.id].images[lang].gallery.length; i++) {\r\n    if (newsStore.newsList[props.id].images[lang].gallery[i].id !== i) {\r\n      newsStore.newsList[props.id].data[lang].gallery[i].id = newsStore.newsList[props.id].images[lang].gallery[i].id = i;\r\n    }\r\n  }\r\n}\r\n\r\nwatch(() => newsStore.uploaded, (value) => {\r\n  if (value) {\r\n    router.go(-1);\r\n  }\r\n});\r\n\r\n</script>\r\n\r\n<script>\r\nexport default {\r\n  name: \"AdminOneNews\"\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.one-news {\r\n  padding: 40px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 20px;\r\n}\r\n.one-news__controls, .one-news__content-top {\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  gap: 20px;\r\n}\r\n.one-news__languages {\r\n  display: flex;\r\n}\r\n\r\n.one-news__wrapper {\r\n  width: 100%;\r\n  padding: 20px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 50px;\r\n}\r\n.one-news__content {\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20px;\r\n}\r\n\r\n.one-news__content-item {\r\n  width: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n\r\n.one-news__content-item p {\r\n  min-width: 85px;\r\n}\r\n\r\np, label {\r\n  margin: 0;\r\n}\r\ninput {\r\n  max-width: 500px;\r\n}\r\n</style>","import script from \"./AdminOneNews.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AdminOneNews.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./AdminOneNews.vue?vue&type=style&index=0&id=5b4ba492&scoped=true&lang=css\"\n\nimport exportComponent from \"S:\\\\Projects\\\\kino-cms\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5b4ba492\"]])\n\nexport default __exports__"],"names":["exports","sfc","props","target","__vccOpts","key","val","useNewsStore","defineStore","id","state","loading","newsList","showModal","uploaded","actions","async","this","newsData","getDocs","collection","db","forEach","doc","push","length","name","creationDate","data","status","language","images","main","image","url","gallery","deleted","news","i","j","publicationDate","Date","seconds","deleteDoc","delRef","ref","storage","deleteObject","catch","error","console","splice","mainRef","uploadBytes","then","getDownloadURL","e","galleryRef","movieList","uploadNewsData","docData","setDoc","galleryImagesSelected","input","files","emit","__exports__","imageSelected","file","class","_createElementVNode","_hoisted_2","_createElementBlock","_hoisted_1","render","router","useRouter","newsStore","addMainImage","lang","index","URL","createObjectURL","addImage","now","deleteImage","watch","selected","value","go"],"sourceRoot":""}