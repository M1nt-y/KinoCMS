"use strict";(self["webpackChunkkino_cms"]=self["webpackChunkkino_cms"]||[]).push([[514],{89:function(e,a){a.Z=(e,a)=>{const t=e.__vccOpts||e;for(const[s,n]of a)t[s]=n;return t}},1014:function(e,a,t){t.d(a,{m:function(){return r}});t(7658);var s=t(1020),n=t(1294),i=t(7329),l=t(36);const r=(0,s.Q_)({id:"News",state:()=>({loading:!1,newsList:[],showModal:!1,uploaded:!1}),actions:{async getNews(){this.loading=!0,this.newsList=[];const e=await(0,l.PL)((0,l.hJ)(i.db,"news"));e.forEach((e=>{this.newsList.push({id:this.newsList.length,name:e.id,uploaded:!0,creationDate:e.data().creationDate,status:e.data().status,language:e.data().language,data:e.data().data,images:[{main:{name:e.data().data[0].main.name,image:null,url:e.data().data[0].main.url,uploaded:!0},gallery:[],deleted:[]},{main:{name:e.data().data[1].main.name,image:null,url:e.data().data[1].main.url,uploaded:!0},gallery:[],deleted:[]}]})})),this.newsList.forEach((e=>{for(let a=0;a<e.data.length;a++){for(let t=0;t<e.data[a].gallery.length;t++)e.images[a].gallery.push({id:e.images[a].gallery.length,name:e.data[a].gallery[t].name,uploaded:!0,image:null,url:e.data[a].gallery[t].url});"object"===typeof e.data[a].publicationDate&&(e.data[a].publicationDate=new Date(1e3*e.data[a].publicationDate.seconds))}})),this.loading=!1},async deleteNews(e){if(this.showModal=!1,this.loading=!0,this.newsList[e].uploaded){await(0,l.oe)((0,l.JU)(i.db,"news",this.newsList[e].name));for(let a=0;a<this.newsList[e].images.length;a++){if(null!==this.newsList[e].images[a].main.name){const t=(0,n.iH)(i.tO,"news/main/"+this.newsList[e].images[a].main.name);await(0,n.oq)(t).catch((e=>{console.error(e)}))}if(0!==this.newsList[e].images[a].gallery.length)for(let t=0;t<this.newsList[e].images[a].gallery.length;t++){const s=(0,n.iH)(i.tO,"news/gallery/"+this.newsList[e].images[a].gallery[t].name);await(0,n.oq)(s).catch((e=>{console.error(e)}))}if(0!==this.newsList[e].images[a].deleted.length)for(let t=0;t<this.newsList[e].images[a].deleted.length;t++){const s=(0,n.iH)(i.tO,"news/gallery/"+this.newsList[e].images[a].deleted[t].name);await(0,n.oq)(s).catch((e=>{console.error(e)}))}}}this.newsList.splice(e,1);for(let a=0;a<this.newsList.length;a++)this.newsList[a].id!==a&&(this.newsList[a].id=a);this.loading=!1},async uploadNews(e){this.loading=!0,this.uploaded=!1;for(let t=0;t<this.newsList[e].images.length;t++){if(null!==this.newsList[e].images[t].main.image)try{const a=(0,n.iH)(i.tO,"news/main/"+this.newsList[e].images[t].main.name);await(0,n.KV)(a,this.newsList[e].images[t].main.image).then((async()=>{await(0,n.Jt)(a).then((a=>{this.newsList[e].data[t].main.url=a}))}))}catch(a){console.error("Error uploading image: ",a)}if(0!==this.newsList[e].images[t].deleted.length)for(let a=0;a<this.newsList[e].images[t].deleted.length;a++){const s=(0,n.iH)(i.tO,"news/gallery/"+this.newsList[e].images[t].deleted[a]);await(0,n.oq)(s).then((()=>{this.newsList[e].images[t].deleted.splice(a,1)})).catch((e=>{console.error(e)}))}for(let s=0;s<this.newsList[e].images[t].gallery.length;s++)if(null!==this.newsList[e].images[t].gallery[s].image)try{const a=(0,n.iH)(i.tO,"news/gallery/"+this.newsList[e].images[t].gallery[s].name);await(0,n.KV)(a,this.newsList[e].images[t].gallery[s].image).then((async()=>{await(0,n.Jt)(a).then((a=>{this.movieList[e].data[t].gallery[s].url=a}))}))}catch(a){console.error("Error uploading image: ",a)}}for(let t=0;t<this.newsList[e].data.length;t++)for(let a=0;a<this.newsList[e].data[t].gallery.length;a++)null!==this.newsList[e].data[t].gallery[a].url&&a===this.newsList[e].data[t].gallery.length-1&&t===this.newsList[e].data.length-1&&this.uploadNewsData(e)},async uploadNewsData(e){const a={creationDate:this.newsList[e].creationDate,status:this.newsList[e].status,language:this.newsList[e].language,data:this.newsList[e].data};await(0,l.pl)((0,l.JU)(i.db,"news",this.newsList[e].name),a).then((()=>{this.loading=!1,this.uploaded=!0}))}}})},144:function(e,a,t){t.d(a,{Z:function(){return m}});var s=t(3396),n=t(7139),i=t(4870),l=t(8040),r=t(9391);const o={class:"gallery"},d={class:"text-center"},g=["src"],u={name:"GallerySwiper"};var c=Object.assign(u,{props:["gallery"],setup(e){const a=(0,i.iH)([r.tl,r.pt,r.W_]);return(t,r)=>((0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("h2",d,(0,n.zw)(t.$t("gallery")),1),(0,s.Wm)((0,i.SU)(l.tq),{"grab-cursor":"","slides-per-view":1,modules:a.value,pagination:{clickable:!0},autoplay:{delay:4e3,disableOnInteraction:!1},navigation:!0},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.gallery,((e,a)=>((0,s.wg)(),(0,s.j4)((0,i.SU)(l.o5),{key:a},{default:(0,s.w5)((()=>[(0,s._)("img",{src:e.url,alt:""},null,8,g)])),_:2},1024)))),128))])),_:1},8,["modules"])]))}}),h=t(89);const w=(0,h.Z)(c,[["__scopeId","data-v-3c84ac43"]]);var m=w},9597:function(e,a,t){t.r(a),t.d(a,{default:function(){return D}});var s=t(3396),n=t(4870),i=t(7139),l=t(2542),r=t(1014),o=t(144);const d=e=>((0,s.dD)("data-v-44202387"),e=e(),(0,s.Cn)(),e),g={class:"page"},u={key:0,class:"container"},c={class:"news"},h=["src"],w=d((()=>(0,s._)("div",{class:"page__ad-horizontal"},null,-1))),m={key:1,class:"page__notfound"},L={class:"container"},p=d((()=>(0,s._)("h2",null,"News not found",-1))),y={name:"OneNewsPage"};var f=Object.assign(y,{props:["id"],setup(e){const a=e,t=(0,l.h)(),d=(0,r.m)();d.getNews();const y=(0,s.Fl)((()=>{let e=null;return d.newsList.forEach(((t,s)=>{t.name.includes(a.id)&&(e=s)})),e})),f=(0,s.Fl)((()=>{let e=null;return null!==y.value&&(e=d.newsList[y.value].data[t.currentLanguage.index].title),e})),v=(0,s.Fl)((()=>{let e=null;return null!==y.value&&(e=d.newsList[y.value].data[t.currentLanguage.index].main.url),e})),_=(0,s.Fl)((()=>{let e=null;return null!==y.value&&(e=d.newsList[y.value].data[t.currentLanguage.index].description),e})),D=(0,s.Fl)((()=>{let e=[];return null!==y.value&&(e=d.newsList[y.value].data[t.currentLanguage.index].gallery),e}));return(e,a)=>{const t=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",g,[null!==(0,n.SU)(y)?((0,s.wg)(),(0,s.iD)("div",u,[(0,s._)("h1",null,(0,i.zw)((0,n.SU)(f)),1),(0,s._)("div",c,[(0,s._)("img",{class:"news__img",src:(0,n.SU)(v),alt:""},null,8,h),(0,s._)("p",null,(0,i.zw)((0,n.SU)(_)),1)]),(0,n.SU)(D).length?((0,s.wg)(),(0,s.j4)((0,n.SU)(o.Z),{key:0,gallery:(0,n.SU)(D)},null,8,["gallery"])):(0,s.kq)("",!0),w])):((0,s.wg)(),(0,s.iD)("div",m,[(0,s._)("div",L,[p,(0,s.Wm)(t,{to:"/news"},{default:(0,s.w5)((()=>[(0,s.Uk)("Go back")])),_:1})])]))])}}}),v=t(89);const _=(0,v.Z)(f,[["__scopeId","data-v-44202387"]]);var D=_}}]);
//# sourceMappingURL=one-news.57692d1a.js.map